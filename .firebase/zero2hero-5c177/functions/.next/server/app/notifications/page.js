(()=>{var e={};e.id=5193,e.ids=[5193],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},17621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(93468),s(32029),s(35866);var a=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93468)),"C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\notifications\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\notifications\\page.tsx"],x="/notifications/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45354:(e,t,s)=>{Promise.resolve().then(s.bind(s,81633))},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},51896:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},30361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},12714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},69039:(e,t,s)=>{"use strict";var a=s(55358);s.o(a,"toast")&&s.d(t,{toast:function(){return a.toast}})},81633:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(10326),r=s(17577),i=s(51896),l=s(62881);let n=(0,l.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var c=s(6507),d=s(12714),o=s(58907),x=s(77636);let m=(0,l.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=s(37358),p=s(30361),u=s(91664),g=s(29752),j=s(69039),y=s(70497),f=s(90434);function v(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[v,N]=(0,r.useState)(null),w=async e=>{try{(await fetch("/api/user/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})})).ok&&t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){}},b=async(e,t)=>{try{let s=await fetch(e),a=await s.blob(),r=window.URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=t||`collection-photo-${Date.now()}.jpg`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),j.toast.success("Photo downloaded successfully!")}catch(e){j.toast.error("Failed to download photo")}},k=e=>{switch(e){case"completion_with_photo":return a.jsx(i.Z,{className:"h-5 w-5 text-green-600"});case"reward":return a.jsx(n,{className:"h-5 w-5 text-yellow-600"});default:return a.jsx(c.Z,{className:"h-5 w-5 text-blue-600"})}},C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsx(y.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[a.jsx(c.Z,{className:"h-8 w-8 text-green-600"}),"Notifications"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Stay updated with your waste collection activities and rewards"})]}),a.jsx(f.default,{href:"/",children:a.jsx(u.z,{variant:"outline",children:"Back to Home"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.jsx(g.Zb,{children:a.jsx(g.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Notifications"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]}),a.jsx(c.Z,{className:"h-8 w-8 text-gray-400"})]})})}),a.jsx(g.Zb,{children:a.jsx(g.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unread"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>!e.isRead).length})]}),a.jsx(d.Z,{className:"h-8 w-8 text-gray-400"})]})})}),a.jsx(g.Zb,{children:a.jsx(g.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"With Photos"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>e.imageUrl).length})]}),a.jsx(i.Z,{className:"h-8 w-8 text-gray-400"})]})})})]}),s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(o.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading notifications..."})]})}):0===e.length?a.jsx(g.Zb,{children:(0,a.jsxs)(g.aY,{className:"p-12 text-center",children:[a.jsx(c.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No notifications yet"}),a.jsx("p",{className:"text-gray-500",children:"Start reporting waste to receive updates and rewards!"}),a.jsx(f.default,{href:"/collect",children:a.jsx(u.z,{className:"mt-4",children:"Report Waste"})})]})}):a.jsx("div",{className:"space-y-4",children:e.map(e=>a.jsx(g.Zb,{className:`transition-all hover:shadow-md ${e.isRead?"":"border-l-4 border-l-green-500 bg-green-50"}`,children:a.jsx(g.aY,{className:"p-6",children:a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:"mt-1",children:k(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-800 mb-2 leading-relaxed",children:e.message}),e.metadata&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[e.metadata.wasteType&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Waste Type:"}),a.jsx("span",{className:"ml-2 text-gray-800",children:e.metadata.wasteType})]}),e.metadata.location&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"h-3 w-3 text-gray-500 mr-1"}),a.jsx("span",{className:"text-gray-600 text-xs",children:e.metadata.location})]}),e.metadata.rewardAmount&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Reward:"}),(0,a.jsxs)("span",{className:"ml-2 text-green-600 font-bold",children:[e.metadata.rewardAmount," tokens"]})]})]})}),e.imageUrl&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-3",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsxs)("h4",{className:"font-medium text-blue-800 flex items-center gap-2",children:[a.jsx(i.Z,{className:"h-4 w-4"}),"Collection Completion Photo"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:e.imageUrl,alt:"Collection completion",className:"w-20 h-20 object-cover rounded-lg border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>N(e.imageUrl||null)}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>N(e.imageUrl||null),children:[a.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"View"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>b(e.imageUrl,`collection-${e.id}-${Date.now()}.jpg`),children:[a.jsx(m,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4"}),C(e.createdAt)]}),!e.isRead&&(0,a.jsxs)(u.z,{variant:"ghost",size:"sm",onClick:()=>w(e.id),children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Mark as Read"]})]})]})]})})})},e.id))})]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>N(null),children:(0,a.jsxs)("div",{className:"max-w-4xl max-h-4xl p-4",children:[a.jsx("img",{src:v,alt:"Collection completion",className:"max-w-full max-h-full object-contain rounded-lg"}),(0,a.jsxs)("div",{className:"flex justify-center mt-4 gap-3",children:[(0,a.jsxs)(u.z,{variant:"outline",onClick:()=>b(v,`collection-photo-${Date.now()}.jpg`),children:[a.jsx(m,{className:"h-4 w-4 mr-2"}),"Download"]}),a.jsx(u.z,{onClick:()=>N(null),children:"Close"})]})]})})]})})}},70497:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var a=s(10326),r=s(35047),i=s(17577),l=s(91664),n=s(94019),c=s(62881);let d=(0,c.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),o=(0,c.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),x=(0,c.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function m({children:e}){let t=(0,r.useRouter)(),[s,c]=(0,i.useState)(!0),[m,h]=(0,i.useState)(!1),[p,u]=(0,i.useState)(!1),g=()=>{t.push("/")};return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!m&&p?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),a.jsx("div",{className:"fixed z-50 w-full max-w-md mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-8 text-center relative",children:[a.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:a.jsx(n.Z,{className:"h-5 w-5"})}),a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(d,{className:"h-8 w-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),a.jsx("p",{className:"text-green-100 mt-2",children:"Please sign in to access this page"})]}),(0,a.jsxs)("div",{className:"px-6 py-8",children:[a.jsx("p",{className:"text-gray-600 text-center mb-6",children:"You need to be signed in to view this content. Create an account or sign in to continue."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(l.z,{onClick:()=>{t.push("/auth/signin")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[a.jsx(o,{className:"h-5 w-5"}),"Sign In"]}),(0,a.jsxs)(l.z,{onClick:()=>{t.push("/auth/signup")},variant:"outline",className:"w-full border-2 border-green-600 text-green-600 hover:bg-green-50 py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[a.jsx(x,{className:"h-5 w-5"}),"Create Account"]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Return to Home Page"})})]})]})})]}):a.jsx(a.Fragment,{children:e})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>d,Zb:()=>l,aY:()=>o,ll:()=>c});var a=s(10326),r=s(17577),i=s(51223);let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},93468:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\devan\Downloads\zero2hero-Waste-Management-System-master\src\app\notifications\page.tsx#default`)},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,3635,6621,2387],()=>s(17621));module.exports=a})();