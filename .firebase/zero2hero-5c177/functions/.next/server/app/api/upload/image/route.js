"use strict";(()=>{var e={};e.id=8374,e.ids=[8374],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55315:e=>{e.exports=require("path")},93915:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var a={};t.r(a),t.d(a,{POST:()=>c});var s=t(49303),o=t(88716),i=t(60670),n=t(87070);let u=require("fs/promises"),p=require("fs");var d=t(55315),l=t.n(d);async function c(e){try{if(!e.cookies.get("admin_session")?.value)return n.NextResponse.json({error:"Admin authentication required"},{status:401});let r=(await e.formData()).get("image");if(!r)return n.NextResponse.json({error:"No file uploaded"},{status:400});let t=await r.arrayBuffer(),a=Buffer.from(t),s=l().join(process.cwd(),"public","uploads","collections");(0,p.existsSync)(s)||await (0,u.mkdir)(s,{recursive:!0});let o=`${Date.now()}-${Math.random().toString(36).substring(7)}.${r.name.split(".").pop()}`,i=l().join(s,o);await (0,u.writeFile)(i,new Uint8Array(a));let d=`/uploads/collections/${o}`;return n.NextResponse.json({success:!0,imageUrl:d,message:"Image uploaded successfully"})}catch(e){return n.NextResponse.json({error:"Failed to upload image",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/upload/image/route",pathname:"/api/upload/image",filename:"route",bundlePath:"app/api/upload/image/route"},resolvedPagePath:"C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\api\\upload\\image\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:x}=m,h="/api/upload/image/route";function v(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,5972],()=>t(93915));module.exports=a})();