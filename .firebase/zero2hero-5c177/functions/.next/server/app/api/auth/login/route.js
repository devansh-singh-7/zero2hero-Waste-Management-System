"use strict";(()=>{var e={};e.id=8873,e.ids=[8873],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},41257:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>x,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{POST:()=>c});var a=r(49303),n=r(88716),o=r(60670),i=r(87070),u=r(42633),p=r(48645),l=r(57745),d=r(2310);async function c(e){try{let{email:t,password:r}=await e.json();if(!t||!r)return i.NextResponse.json({error:"Email and password are required"},{status:422});let s=(await u.db.select().from(p.Users).where((0,l.eq)(p.Users.email,t)))[0];if(!s)return i.NextResponse.json({error:"User not registered"},{status:404});let a=await (0,d.Gv)(r,s.password);if(!s.password||!a)return i.NextResponse.json({error:"Invalid credentials"},{status:401});let n=i.NextResponse.json({user:{id:s.id,email:s.email,name:s.name}}),o=(0,d.V3)({id:s.id,email:s.email,name:s.name});return n.cookies.set("auth_token",o,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:2592e3}),n}catch(e){return i.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:h}=m,v="/api/auth/login/route";function j(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,7917,2310],()=>r(41257));module.exports=s})();