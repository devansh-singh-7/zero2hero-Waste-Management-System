"use strict";(()=>{var e={};e.id=5701,e.ids=[5701],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},82459:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>x,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>p});var a=t(49303),n=t(88716),i=t(60670),o=t(87070),u=t(42633),d=t(48645),l=t(57745),c=t(2310);async function p(e){try{let r;try{r=await e.json()}catch(e){return o.NextResponse.json({error:"Invalid request body"},{status:400})}let{name:t,email:s,password:a}=r;if(!s||!a||!t)return o.NextResponse.json({error:"Validation failed",details:{name:t?void 0:"Name is required",email:s?void 0:"Email is required",password:a?void 0:"Password is required"}},{status:422});if(s&&!s.includes("@"))return o.NextResponse.json({error:"Validation failed",details:{email:"Invalid email format"}},{status:422});if(!u.db)return o.NextResponse.json({error:"Service unavailable",details:"Database connection failed"},{status:503});try{let[e]=await u.db.select({id:d.Users.id,email:d.Users.email}).from(d.Users).where((0,l.eq)(d.Users.email,s));if(e)return o.NextResponse.json({error:"Email already registered"},{status:409})}catch(e){return o.NextResponse.json({error:"Database error",details:e instanceof Error?e.message:"Error checking existing user"},{status:500})}try{let e=await (0,c.c_)(a),[r]=await u.db.insert(d.Users).values({email:s,name:t,password:e,createdAt:new Date}).returning({id:d.Users.id,name:d.Users.name,email:d.Users.email});if(!r?.id)throw Error("User creation failed - no user returned");return o.NextResponse.json({id:r.id,name:r.name,email:r.email},{status:201})}catch(e){return o.NextResponse.json({error:"Failed to create user",details:e instanceof Error?e.message:"Unknown database error"},{status:500})}}catch(e){return o.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"An unexpected error occurred",timestamp:new Date().toISOString()},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"C:\\Users\\devan\\Downloads\\zero2hero-Waste-Management-System-master\\src\\app\\api\\users\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:f}=m,v="/api/users/route";function h(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972,7917,2310],()=>t(82459));module.exports=s})();