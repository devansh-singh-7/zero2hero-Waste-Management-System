(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[208],{594:function(e,t,a){Promise.resolve().then(a.bind(a,8656))},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6858:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3581:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},1671:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6540:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9474:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},166:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var s=a(5775),n=a.n(s)},4315:function(e,t,a){"use strict";a.d(t,{Am:function(){return s.Am}});var s=a(9064)},5775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let s=a(7043);a(7437),a(2265);let n=s._(a(5602));function r(e,t){var a;let s={loading:e=>{let{error:t,isLoading:a,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let r={...s,...t};return(0,n.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let s=a(8993);function n(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return a}},5602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=a(7437),n=a(2265),r=a(1523),i=a(49);function l(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...c,...e},a=(0,n.lazy)(()=>t.loader().then(l)),o=t.loading;function d(e){let l=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(n.Suspense,{fallback:l,children:c})}return d.displayName="LoadableComponent",d}},49:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let s=a(7437),n=a(544);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,n.getExpectedRequestStore)("next/dynamic css"),r=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},8656:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var s=a(7437),n=a(2265),r=a(9474),i=a(2660),l=a(8930),c=a(3247),o=a(2489),d=a(6540),u=a(6858),m=a(1723),h=a(1671),f=a(3774);let x=(0,a(9205).Z)("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);var p=a(1047),y=a(3581),g=a(2381),j=a(279),b=a(4315),v=a(1548),w=a(166),N=a(2542),k=a(7648);(0,w.default)(()=>Promise.all([a.e(641),a.e(212),a.e(74)]).then(a.bind(a,4758)),{loadableGenerated:{webpack:()=>[4758]},ssr:!1,loading:()=>(0,s.jsx)("p",{children:"Loading map..."})}),(0,w.default)(()=>Promise.all([a.e(641),a.e(212),a.e(726)]).then(a.bind(a,9726)),{loadableGenerated:{webpack:()=>[9726]},ssr:!1,loading:()=>(0,s.jsx)("p",{children:"Loading map..."})});let C="AIzaSyDHLYPDML0fOfyrSJW4vGeaMZDUa8BPcLM";function M(){let[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)(!0),[h,f]=(0,n.useState)(null),[x,p]=(0,n.useState)(""),[y,w]=(0,n.useState)(1),[M,T]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let t=await e.json();T(t.admin)}}catch(e){}})()},[]);let A=async()=>{let e=await fetch("/api/admin/collection-tasks?t=".concat(Date.now()),{credentials:"include",cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(!e.ok)throw Error("Failed to fetch tasks");return(await e.json()).tasks},P=async(e,t)=>{try{let a=await fetch("/api/admin/collect",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({taskId:e,newStatus:t})});if(!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.details||e.error||"HTTP ".concat(a.status))}return await a.json()}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";throw Error("Failed to update task: ".concat(e))}},S=async()=>{m(!0);try{let e=await A();t(e||[])}catch(e){b.Am.error("Failed to load collection tasks")}finally{m(!1)}};(0,n.useEffect)(()=>{S()},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>{S()},3e4);return()=>clearInterval(e)},[]);let L=async e=>{if(!M){b.Am.error("Admin authentication required");return}try{await P(e,"in_progress"),t(t=>t.map(t=>t.id===e?{...t,status:"in_progress",collectorId:M.id}:t)),b.Am.success("Task accepted! You can now collect this waste.")}catch(e){b.Am.error("Failed to accept task. Please try again.")}},_=async(a,s)=>{if(!M){b.Am.error("Admin authentication required");return}try{let n=null,r=null;if(s){let t=new FormData;t.append("image",s);let i=await fetch("/api/upload/image",{method:"POST",credentials:"include",body:t});i.ok?n=(await i.json()).imageUrl:b.Am.error("Failed to upload image, but task will be completed");let l=await z(s);if(C){let t=new v.$D(C).getGenerativeModel({model:"gemini-1.5-flash"}),n=e.find(e=>e.id===a);if(n){let e="Analyze this image and determine if it matches the reported waste collection task:\n            - Expected waste type: ".concat(n.wasteType,"\n            - Expected amount: ").concat(n.amount,"\n            \n            Please respond with a JSON object containing:\n            - wasteTypeMatch: boolean (true if the waste type matches)\n            - quantityMatch: boolean (true if the quantity appears reasonable)\n            - confidence: number (0-1 confidence score)\n            - notes: string (brief explanation)");try{let a=(await t.generateContent([e,{inlineData:{data:l.split(",")[1],mimeType:s.type}}])).response.text();try{let e=a.match(/\{[\s\S]*\}/);e&&(r=JSON.parse(e[0]))}catch(e){}}catch(e){b.Am.error("AI verification failed, but task will be marked as completed")}}}}let i=await fetch("/api/admin/collect",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({taskId:a,verificationResult:r,imageUrl:n})});if(!i.ok)throw Error("Failed to complete task");let l=await i.json();t(e=>e.map(e=>e.id===a?{...e,status:"completed",imageUrl:n,verificationResult:r}:e)),b.Am.success(l.message||"Task completed successfully!"),r&&!r.wasteTypeMatch&&b.Am.error("AI detected potential mismatch in waste type - please review"),n&&b.Am.success("\uD83D\uDCF8 Completion photo has been sent to the user's notifications!"),await S()}catch(e){b.Am.error("Failed to complete task. Please try again.")}},z=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),R=e.filter(e=>e.location.toLowerCase().includes(x.toLowerCase())||e.wasteType.toLowerCase().includes(x.toLowerCase())||e.userName&&e.userName.toLowerCase().includes(x.toLowerCase())||e.userEmail&&e.userEmail.toLowerCase().includes(x.toLowerCase())),E=Math.ceil(R.length/5),O=R.slice((y-1)*5,5*y),q={plastic:"bg-blue-100 text-blue-800",organic:"bg-green-100 text-green-800",metal:"bg-gray-100 text-gray-800",paper:"bg-yellow-100 text-yellow-800",glass:"bg-purple-100 text-purple-800",electronic:"bg-red-100 text-red-800",mixed:"bg-orange-100 text-orange-800"};return a?(0,s.jsx)(N.Z,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"})})})}):(0,s.jsx)(N.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"flex items-center justify-between px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(k.default,{href:"/admin",className:"mr-4",children:(0,s.jsxs)(g.z,{variant:"ghost",size:"sm",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,s.jsx)(l.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Waste Collection Management"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Manage and track waste collection tasks"})]})]})})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(j.I,{placeholder:"Search by location or waste type...",value:x,onChange:e=>p(e.target.value),className:"pl-10"})]}),x&&(0,s.jsxs)(g.z,{variant:"ghost",size:"sm",onClick:()=>p(""),children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),"Clear"]}),(0,s.jsxs)(g.z,{variant:"outline",size:"sm",onClick:S,disabled:a,className:"ml-auto",children:[a?(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg flex justify-between items-center text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{children:["Total Reports: ",(0,s.jsx)("strong",{children:e.length})]}),(0,s.jsxs)("span",{children:["Pending: ",(0,s.jsx)("strong",{children:e.filter(e=>"pending"===e.status).length})]}),(0,s.jsxs)("span",{children:["In Progress: ",(0,s.jsx)("strong",{children:e.filter(e=>"in_progress"===e.status).length})]})]}),(0,s.jsxs)("div",{className:"text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),(0,s.jsx)("div",{className:"grid gap-6 mb-8",children:0===O.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(l.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No collection tasks found"}),(0,s.jsx)("p",{className:"text-gray-500",children:x?"Try adjusting your search criteria":"No tasks are currently available for collection"})]}):O.map(e=>(0,s.jsx)(Z,{task:e,wasteTypeColors:q,hoveredWasteType:h,setHoveredWasteType:f,onAcceptTask:L,onCompleteTask:_,isAdmin:!!M,adminId:null==M?void 0:M.id},e.id))}),E>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)(g.z,{variant:"outline",onClick:()=>w(e=>Math.max(1,e-1)),disabled:1===y,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 mx-4",children:["Page ",y," of ",E]}),(0,s.jsx)(g.z,{variant:"outline",onClick:()=>w(e=>Math.min(E,e+1)),disabled:y===E,children:"Next"})]})]})]})})}function Z(e){let{task:t,wasteTypeColors:a,hoveredWasteType:r,setHoveredWasteType:i,onAcceptTask:l,onCompleteTask:c,isAdmin:o,adminId:d}=e,[j,v]=(0,n.useState)(null),[w,N]=(0,n.useState)(null),[k,C]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:t.location})]}),(t.userName||t.userEmail)&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm text-gray-600",children:[(0,s.jsx)("span",{children:"Reported by:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:t.userName||"Unknown User"}),t.userEmail&&(0,s.jsxs)("span",{className:"text-gray-500",children:["(",t.userEmail,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium cursor-pointer transition-colors ".concat(a[t.wasteType.toLowerCase()]||"bg-gray-100 text-gray-800"," ").concat(r===t.wasteType?"ring-2 ring-green-500":""),onMouseEnter:()=>i(t.wasteType),onMouseLeave:()=>i(null),children:t.wasteType}),(0,s.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,s.jsx)(x,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"text-sm",children:t.amount})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"text-sm",children:new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,s.jsx)("div",{className:"flex flex-col items-end gap-2",children:(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ".concat((e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"verified":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:[(e=>{switch(e){case"pending":default:return(0,s.jsx)(m.Z,{className:"h-4 w-4"});case"in_progress":return(0,s.jsx)(u.Z,{className:"h-4 w-4"});case"completed":case"verified":return(0,s.jsx)(h.Z,{className:"h-4 w-4"})}})(t.status),t.status.replace("_"," ").toUpperCase()]})})]}),t.verificationResult&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Verification Result"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Waste Type Match:"}),(0,s.jsx)("span",{className:t.verificationResult.wasteTypeMatch?"text-green-600":"text-red-600",children:t.verificationResult.wasteTypeMatch?"Yes":"No"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Quantity Match:"}),(0,s.jsx)("span",{className:t.verificationResult.quantityMatch?"text-green-600":"text-red-600",children:t.verificationResult.quantityMatch?"Yes":"No"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Confidence:"}),(0,s.jsxs)("span",{className:"text-gray-900",children:[Math.round(100*t.verificationResult.confidence),"%"]})]})]})]}),w&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Photo"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("img",{src:w,alt:"Selected collection photo",className:"w-24 h-24 object-cover rounded-lg border"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsx)("p",{children:"Photo selected successfully!"}),(0,s.jsx)("p",{children:'Click "Complete Task" to proceed.'})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:["pending"===t.status&&o&&(0,s.jsx)(g.z,{onClick:()=>l(t.id),className:"flex-1",children:"Accept Task"}),"in_progress"===t.status&&t.collectorId===d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(C(!0),v(a),N(URL.createObjectURL(a)),b.Am.success("Photo selected: ".concat(a.name)),C(!1))},className:"hidden",id:"file-input-".concat(t.id)}),(0,s.jsxs)(g.z,{variant:"outline",className:"w-full",type:"button",onClick:()=>{let e=document.getElementById("file-input-".concat(t.id));e&&e.click()},disabled:k,children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),k?"Uploading...":j?"Change Photo":"Add Photo"]})]}),(0,s.jsxs)(g.z,{onClick:()=>c(t.id,j),disabled:!j,className:"flex-1",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Complete Task"]})]}),"completed"===t.status&&(0,s.jsxs)(g.z,{variant:"outline",disabled:!0,className:"flex-1",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Task Completed"]})]})]})}},2542:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(7437),n=a(2265),r=a(9376),i=a(6540),l=a(8906);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),h=(0,r.useRouter)();return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let t=await e.json();t.isAdmin?(c(!0),m(t.admin)):h.push("/admin/login")}else h.push("/admin/login")}catch(e){h.push("/admin/login")}finally{d(!1)}})()},[h]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-green-600"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Verifying admin access..."})]})}):a?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(l.Z,{className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this area."})]})})}},2381:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var s=a(7437),n=a(2265),r=a(7053),i=a(7712),l=a(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:o=!1,...d}=e,u=o?r.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:a})),ref:t,...d})});o.displayName="Button"},279:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7437),n=a(2265),r=a(3448);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(1994),n=a(3335);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[73,64,448,756,971,117,744],function(){return e(e.s=594)}),_N_E=e.O()}]);