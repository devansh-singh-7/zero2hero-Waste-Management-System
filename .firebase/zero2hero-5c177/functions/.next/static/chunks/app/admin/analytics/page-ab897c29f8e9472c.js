(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{4958:function(e,s,t){Promise.resolve().then(t.bind(t,7584))},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3327:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},6215:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6540:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},8906:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9474:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4315:function(e,s,t){"use strict";t.d(s,{Am:function(){return a.Am}});var a=t(9064)},7584:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var a=t(7437),n=t(2265),l=t(2660),r=t(8906),i=t(9205);let c=(0,i.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var d=t(9474),o=t(5805);let x=(0,i.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var m=t(6215),u=t(3327),h=t(1723);let f=(0,i.Z)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var p=t(1671),j=t(525),y=t(2381),v=t(9820),g=t(4315),N=t(9376),b=t(2542),w=t(7648);function k(){let[e,s]=(0,n.useState)(null),[t,i]=(0,n.useState)(!0),[k,Z]=(0,n.useState)(null),M=(0,N.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let s=await e.json();Z(s.admin)}let t=await fetch("/api/admin/analytics",{credentials:"include"});if(t.ok){let e=await t.json();s(e)}else throw Error("Failed to fetch analytics")}catch(e){g.Am.error("Failed to load analytics")}finally{i(!1)}})()},[]);let C=async()=>{try{await fetch("/api/admin/auth/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("adminEmail"),g.Am.success("Logged out successfully"),M.push("/admin/login")}catch(e){g.Am.error("Logout failed")}},A=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsx)(b.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.default,{href:"/admin",className:"mr-4",children:(0,a.jsxs)(y.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,a.jsx)(r.Z,{className:"h-8 w-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics & Reports"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"System performance and statistics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",(null==k?void 0:k.name)||"Admin"]}),(0,a.jsxs)(y.z,{onClick:C,variant:"outline",size:"sm",children:[(0,a.jsx)(c,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}),(0,a.jsx)("div",{className:"p-6 max-w-7xl mx-auto",children:t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading analytics..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.ll,{className:"text-sm font-medium",children:"Total Users"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==e?void 0:e.overview.totalUsers)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",(null==e?void 0:e.recent.usersLastWeek)||0," this week"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.ll,{className:"text-sm font-medium",children:"Total Reports"}),(0,a.jsx)(x,{className:"h-4 w-4 text-purple-600"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==e?void 0:e.overview.totalReports)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",(null==e?void 0:e.recent.reportsLastWeek)||0," this week"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.ll,{className:"text-sm font-medium",children:"Total Tasks"}),(0,a.jsx)(m.Z,{className:"h-4 w-4 text-orange-600"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null==e?void 0:e.overview.totalTasks)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==e?void 0:e.overview.totalTasks)?Math.round(e.overview.completedTasks/e.overview.totalTasks*100):0,"% completion rate"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.ll,{className:"text-sm font-medium",children:"Tokens Distributed"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==e?void 0:e.overview.totalTokensDistributed)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all users"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[(0,a.jsxs)(v.ll,{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Task Status Overview"]}),(0,a.jsx)(v.SZ,{children:"Current status of all waste collection tasks"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-yellow-500 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Pending"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-yellow-500",children:(null==e?void 0:e.overview.pendingTasks)||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f,{className:"h-4 w-4 text-blue-500 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"In Progress"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-blue-500",children:(null==e?void 0:e.overview.inProgressTasks)||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-green-500 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Completed"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-green-500",children:(null==e?void 0:e.overview.completedTasks)||0})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[(0,a.jsxs)(v.ll,{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"Growth Statistics"]}),(0,a.jsx)(v.SZ,{children:"Recent activity and growth metrics"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Users (Last Week)"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["+",(null==e?void 0:e.recent.usersLastWeek)||0]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Users (Last Month)"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["+",(null==e?void 0:e.recent.usersLastMonth)||0]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Reports (Last Week)"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:["+",(null==e?void 0:e.recent.reportsLastWeek)||0]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Reports (Last Month)"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:["+",(null==e?void 0:e.recent.reportsLastMonth)||0]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[(0,a.jsxs)(v.ll,{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Top Users by Tokens"]}),(0,a.jsx)(v.SZ,{children:"Users with highest token balances"})]}),(0,a.jsx)(v.aY,{children:(null==e?void 0:e.topUsers)&&e.topUsers.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.topUsers.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,a.jsxs)("span",{className:"font-bold text-green-600",children:[Number(e.balance)||0," tokens"]})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No user data available"})})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[(0,a.jsxs)(v.ll,{className:"flex items-center",children:[(0,a.jsx)(c,{className:"h-5 w-5 mr-2"}),"Recent Activity"]}),(0,a.jsx)(v.SZ,{children:"Latest waste reports and activities"})]}),(0,a.jsx)(v.aY,{children:(null==e?void 0:e.recentActivity)&&e.recentActivity.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.recentActivity.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[e.type," Report"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",e.userName," â€¢ ",e.location]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:A(e.createdAt)})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})})]})]})]})})]})})}},2542:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(7437),n=t(2265),l=t(9376),r=t(6540),i=t(8906);function c(e){let{children:s}=e,[t,c]=(0,n.useState)(!1),[d,o]=(0,n.useState)(!0),[x,m]=(0,n.useState)(null),u=(0,l.useRouter)();return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let s=await e.json();s.isAdmin?(c(!0),m(s.admin)):u.push("/admin/login")}else u.push("/admin/login")}catch(e){u.push("/admin/login")}finally{o(!1)}})()},[u]),d)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-green-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verifying admin access..."})]})}):t?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this area."})]})})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(7437),n=t(2265),l=t(7053),r=t(7712),i=t(3448);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,s)=>{let{className:t,variant:n,size:r,asChild:d=!1,...o}=e,x=d?l.g7:"button";return(0,a.jsx)(x,{className:(0,i.cn)(c({variant:n,size:r,className:t})),ref:s,...o})});d.displayName="Button"},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return r},aY:function(){return o},ll:function(){return c}});var a=t(7437),n=t(2265),l=t(3448);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});r.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return l}});var a=t(1994),n=t(3335);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,a.W)(s))}}},function(e){e.O(0,[73,64,448,971,117,744],function(){return e(e.s=4958)}),_N_E=e.O()}]);