(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{3641:function(e,t,r){Promise.resolve().then(r.bind(r,8311))},3327:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8617:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},6595:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9474:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},4315:function(e,t,r){"use strict";r.d(t,{Am:function(){return a.Am}});var a=r(9064)},8311:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),n=r(3327),i=r(6595),o=r(8617),l=r(9474),c=r(1671),d=r(2381),u=r(9820),f=r(9174),m=r(3448);let p=s.forwardRef((e,t)=>{let{className:r,value:s=0,max:n=100,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",r),...i,children:(0,a.jsx)("div",{className:"h-full w-full flex-1 bg-gradient-to-r from-green-500 to-green-600 transition-all duration-300 ease-in-out",style:{transform:"translateX(-".concat(100-Math.min(Math.max(s/n*100,0),100),"%)")}})})});p.displayName="Progress";var g=r(4315),h=r(3310);function x(){let{user:e,loading:t}=(0,h.a)(),[r,m]=(0,s.useState)({totalReports:0,totalEarnings:0,completedTasks:0,currentStreak:0}),[x,y]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),[j,k]=(0,s.useState)("all");(0,s.useEffect)(()=>{t||w()},[t,e]);let w=async()=>{b(!0);try{if(e){let e=await fetch("/api/user/stats",{credentials:"include",cache:"no-store"});if(e.ok){let t=await e.json();m({totalReports:t.totalReports||0,totalEarnings:t.totalEarnings||0,completedTasks:t.completedTasks||0,currentStreak:t.currentStreak||0}),N(t)}}else N({})}catch(e){g.Am.error("Failed to load rewards data"),N({})}finally{b(!1)}},N=e=>{y([{id:"first_report",title:"First Reporter",description:"Submit your first waste report",icon:"\uD83C\uDFAF",category:"reporter",difficulty:"bronze",reportsRequired:1,achieved:(e.totalReports||0)>=1,progress:Math.min(e.totalReports||0,1),total:1,unlockBonus:10},{id:"waste_warrior",title:"Waste Warrior",description:"Report 10 waste incidents",icon:"⚔️",category:"reporter",difficulty:"silver",reportsRequired:10,achieved:(e.totalReports||0)>=10,progress:Math.min(e.totalReports||0,10),total:10,unlockBonus:25},{id:"environmental_guardian",title:"Environmental Guardian",description:"Report 25 waste incidents",icon:"\uD83C\uDF0D",category:"reporter",difficulty:"gold",reportsRequired:25,achieved:(e.totalReports||0)>=25,progress:Math.min(e.totalReports||0,25),total:25,unlockBonus:100},{id:"eco_champion",title:"Eco Champion",description:"Report 50 waste incidents",icon:"\uD83C\uDFC6",category:"reporter",difficulty:"platinum",reportsRequired:50,achieved:(e.totalReports||0)>=50,progress:Math.min(e.totalReports||0,50),total:50,unlockBonus:250},{id:"community_helper",title:"Community Helper",description:"Complete 5 collection tasks",icon:"\uD83E\uDD1D",category:"collector",difficulty:"bronze",tasksRequired:5,achieved:(e.completedTasks||0)>=5,progress:Math.min(e.completedTasks||0,5),total:5,unlockBonus:15},{id:"collection_expert",title:"Collection Expert",description:"Complete 20 collection tasks",icon:"\uD83D\uDE9B",category:"collector",difficulty:"silver",tasksRequired:20,achieved:(e.completedTasks||0)>=20,progress:Math.min(e.completedTasks||0,20),total:20,unlockBonus:100},{id:"waste_master",title:"Waste Master",description:"Complete 50 collection tasks",icon:"\uD83D\uDC51",category:"collector",difficulty:"gold",tasksRequired:50,achieved:(e.completedTasks||0)>=50,progress:Math.min(e.completedTasks||0,50),total:50,unlockBonus:200},{id:"token_collector",title:"Token Collector",description:"Earn 100 tokens",icon:"\uD83D\uDCB0",category:"earner",difficulty:"bronze",earningsRequired:100,achieved:(e.totalEarnings||0)>=100,progress:Math.min(e.totalEarnings||0,100),total:100,unlockBonus:20},{id:"wealth_builder",title:"Wealth Builder",description:"Earn 500 tokens",icon:"\uD83D\uDC8E",category:"earner",difficulty:"silver",earningsRequired:500,achieved:(e.totalEarnings||0)>=500,progress:Math.min(e.totalEarnings||0,500),total:500,unlockBonus:100},{id:"token_tycoon",title:"Token Tycoon",description:"Earn 1000 tokens",icon:"\uD83C\uDFE6",category:"earner",difficulty:"gold",earningsRequired:1e3,achieved:(e.totalEarnings||0)>=1e3,progress:Math.min(e.totalEarnings||0,1e3),total:1e3,unlockBonus:250},{id:"early_adopter",title:"Early Adopter",description:"One of the first users of the platform",icon:"\uD83C\uDF1F",category:"special",difficulty:"gold",achieved:!0,progress:1,total:1,unlockBonus:50},{id:"streak_master",title:"Streak Master",description:"Maintain a 7-day activity streak",icon:"\uD83D\uDD25",category:"special",difficulty:"silver",achieved:(e.currentStreak||0)>=7,progress:Math.min(e.currentStreak||0,7),total:7,unlockBonus:75}])},E=e=>{switch(e){case"bronze":return"from-orange-400 to-orange-600";case"silver":default:return"from-gray-400 to-gray-600";case"gold":return"from-yellow-400 to-yellow-600";case"platinum":return"from-purple-400 to-purple-600"}},C=e=>{switch(e){case"bronze":default:return(0,a.jsx)(n.Z,{className:"h-4 w-4"});case"silver":return(0,a.jsx)(i.Z,{className:"h-4 w-4"});case"gold":return(0,a.jsx)(o.Z,{className:"h-4 w-4"});case"platinum":return(0,a.jsx)(l.Z,{className:"h-4 w-4"})}},R="all"===j?x:x.filter(e=>e.category===j),S=x.filter(e=>e.achieved),D=x.length,Z=D>0?S.length/D*100:0;return v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Badge Rewards"})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Earn badges by completing various activities and milestones"}),(0,a.jsx)(u.Zb,{className:"mb-6",children:(0,a.jsxs)(u.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Your Progress"}),(0,a.jsxs)(f.C,{variant:"default",className:"bg-green-500",children:[S.length,"/",D," Badges"]})]}),(0,a.jsx)(p,{value:Z,className:"h-3 mb-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[Z.toFixed(1),"% Complete • ",D-S.length," badges remaining"]})]})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-6 justify-center",children:["all","reporter","collector","earner","special"].map(e=>(0,a.jsx)(d.z,{variant:j===e?"default":"outline",size:"sm",onClick:()=>k(e),className:"capitalize",children:"all"===e?"All Badges":"".concat(e," Badges")},e))}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>(0,a.jsxs)(u.Zb,{className:"relative overflow-hidden transition-all duration-300 hover:shadow-lg ".concat(e.achieved?"border-green-200 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br ".concat(E(e.difficulty)," opacity-20"),children:(0,a.jsx)("div",{className:"absolute top-2 right-2 text-white",children:C(e.difficulty)})}),e.achieved&&(0,a.jsx)("div",{className:"absolute top-3 left-3",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-green-500"})}),(0,a.jsx)(u.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-3xl p-3 rounded-lg ".concat(e.achieved?"bg-white":"bg-gray-100 grayscale"),children:e.achieved?e.icon:"\uD83D\uDD12"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(u.ll,{className:"text-lg ".concat(e.achieved?"text-gray-800":"text-gray-500"),children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(f.C,{variant:"outline",className:"text-xs ".concat(E(e.difficulty).replace("from-","border-").replace("to-","text-").split(" ")[0]),children:e.difficulty.toUpperCase()}),e.unlockBonus&&(0,a.jsxs)(f.C,{variant:"outline",className:"text-xs border-green-500 text-green-600",children:["+",e.unlockBonus," pts"]})]})]})]})}),(0,a.jsxs)(u.aY,{children:[(0,a.jsx)(u.SZ,{className:"mb-4 text-sm",children:e.description}),!e.achieved&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[e.progress,"/",e.total]})]}),(0,a.jsx)(p,{value:e.progress/e.total*100,className:"h-2"})]}),e.achieved&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Badge Earned!"})]}),(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.reportsRequired&&"".concat(e.reportsRequired," reports required"),e.tasksRequired&&"".concat(e.tasksRequired," tasks required"),e.earningsRequired&&"".concat(e.earningsRequired," tokens required"),"early_adopter"===e.id&&"Awarded to early platform users","streak_master"===e.id&&"7-day activity streak required"]})})]})]},e.id))}),0===R.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No badges found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Try selecting a different category"})]}),!e&&(0,a.jsx)(u.Zb,{className:"mt-8 bg-gradient-to-r from-green-500 to-blue-600 text-white",children:(0,a.jsxs)(u.aY,{className:"p-6 text-center",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Start Earning Badges Today!"}),(0,a.jsx)("p",{className:"mb-4",children:"Sign up to track your progress and unlock amazing rewards"}),(0,a.jsx)(d.z,{variant:"secondary",size:"lg",children:"Get Started"})]})})]})})}},3310:function(e,t,r){"use strict";r.d(t,{H:function(){return i},a:function(){return o}});var a=r(7437),s=r(2265);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),u=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/auth/check");if(!e.ok)throw Error("Authentication check failed: ".concat(e.status));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Invalid response type from server");let r=await e.json();r.isAuthenticated&&r.user?(i(r.user),localStorage.setItem("userEmail",r.user.email),localStorage.setItem("user",JSON.stringify(r.user))):(i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"))}catch(t){let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){localStorage.removeItem("user"),i(null)}else i(null);localStorage.removeItem("userEmail"),d("Failed to check authentication status")}finally{l(!1)}},[]);(0,s.useEffect)(()=>{u()},[u]);let f=async(e,t)=>{try{l(!0),d(null);let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e=await r.json();throw Error(e.error||"Login failed")}let a=r.headers.get("content-type");if(!a||!a.includes("application/json"))throw Error("Invalid response type from server");let s=await r.json();if(s.user)i(s.user),localStorage.setItem("userEmail",s.user.email);else throw Error("Invalid login response")}catch(e){throw d(e instanceof Error?e.message:"Login failed"),e}finally{l(!1)}},m=async()=>{try{if(l(!0),d(null),!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw Error("Logout failed");i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){throw d("Logout failed"),e}finally{l(!1)}},p=async(e,t,r)=>{try{l(!0),d(null);let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),s=await a.json();if(!a.ok)throw Error(s.error||"Signup failed");i(s.user)}catch(e){throw d(e instanceof Error?e.message:"Signup failed"),e}finally{l(!1)}};return(0,a.jsx)(n.Provider,{value:{user:r,loading:o,error:c,login:f,logout:m,signup:p},children:t})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(7437);r(2265);var s=r(7712),n=r(3448);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(7437),s=r(2265),n=r(7053),i=r(7712),o=r(3448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[73,64,971,117,744],function(){return e(e.s=3641)}),_N_E=e.O()}]);