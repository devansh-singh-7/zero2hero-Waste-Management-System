(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{6773:function(e,t,s){Promise.resolve().then(s.bind(s,342))},4766:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3581:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6337:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9090:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},7806:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4315:function(e,t,s){"use strict";s.d(t,{Am:function(){return a.Am}});var a=s(9064)},342:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),n=s(2265),r=s(3581),i=s(9205);let c=(0,i.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var l=s(4766),d=s(2208),o=s(9474),x=s(3774);let m=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=s(1047),u=s(1671),f=s(2381),y=s(9820),g=s(4315),p=s(893),j=s(7648);function v(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[v,N]=(0,n.useState)(null);(0,n.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/user/notifications",{credentials:"include"});if(e.ok){let s=await e.json();t(s)}else throw Error("Failed to fetch notifications")}catch(e){g.Am.error("Failed to load notifications")}finally{i(!1)}},w=async e=>{try{(await fetch("/api/user/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})})).ok&&t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){}},k=async(e,t)=>{try{let s=await fetch(e),a=await s.blob(),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download=t||"collection-photo-".concat(Date.now(),".jpg"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),g.Am.success("Photo downloaded successfully!")}catch(e){g.Am.error("Failed to download photo")}},Z=e=>{switch(e){case"completion_with_photo":return(0,a.jsx)(r.Z,{className:"h-5 w-5 text-green-600"});case"reward":return(0,a.jsx)(c,{className:"h-5 w-5 text-yellow-600"});default:return(0,a.jsx)(l.Z,{className:"h-5 w-5 text-blue-600"})}},C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsx)(p.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 text-green-600"}),"Notifications"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Stay updated with your waste collection activities and rewards"})]}),(0,a.jsx)(j.default,{href:"/",children:(0,a.jsx)(f.z,{variant:"outline",children:"Back to Home"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsx)(y.Zb,{children:(0,a.jsx)(y.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Notifications"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]}),(0,a.jsx)(l.Z,{className:"h-8 w-8 text-gray-400"})]})})}),(0,a.jsx)(y.Zb,{children:(0,a.jsx)(y.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Unread"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>!e.isRead).length})]}),(0,a.jsx)(d.Z,{className:"h-8 w-8 text-gray-400"})]})})}),(0,a.jsx)(y.Zb,{children:(0,a.jsx)(y.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"With Photos"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>e.imageUrl).length})]}),(0,a.jsx)(r.Z,{className:"h-8 w-8 text-gray-400"})]})})})]}),s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading notifications..."})]})}):0===e.length?(0,a.jsx)(y.Zb,{children:(0,a.jsxs)(y.aY,{className:"p-12 text-center",children:[(0,a.jsx)(l.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No notifications yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Start reporting waste to receive updates and rewards!"}),(0,a.jsx)(j.default,{href:"/collect",children:(0,a.jsx)(f.z,{className:"mt-4",children:"Report Waste"})})]})}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)(y.Zb,{className:"transition-all hover:shadow-md ".concat(e.isRead?"":"border-l-4 border-l-green-500 bg-green-50"),children:(0,a.jsx)(y.aY,{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,a.jsx)("div",{className:"mt-1",children:Z(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-gray-800 mb-2 leading-relaxed",children:e.message}),e.metadata&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[e.metadata.wasteType&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-600",children:"Waste Type:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:e.metadata.wasteType})]}),e.metadata.location&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 text-gray-500 mr-1"}),(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:e.metadata.location})]}),e.metadata.rewardAmount&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-600",children:"Reward:"}),(0,a.jsxs)("span",{className:"ml-2 text-green-600 font-bold",children:[e.metadata.rewardAmount," tokens"]})]})]})}),e.imageUrl&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsxs)("h4",{className:"font-medium text-blue-800 flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),"Collection Completion Photo"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:"Collection completion",className:"w-20 h-20 object-cover rounded-lg border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>N(e.imageUrl||null)}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>N(e.imageUrl||null),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"View"]}),(0,a.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>k(e.imageUrl,"collection-".concat(e.id,"-").concat(Date.now(),".jpg")),children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),C(e.createdAt)]}),!e.isRead&&(0,a.jsxs)(f.z,{variant:"ghost",size:"sm",onClick:()=>w(e.id),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Mark as Read"]})]})]})]})})})},e.id))})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>N(null),children:(0,a.jsxs)("div",{className:"max-w-4xl max-h-4xl p-4",children:[(0,a.jsx)("img",{src:v,alt:"Collection completion",className:"max-w-full max-h-full object-contain rounded-lg"}),(0,a.jsxs)("div",{className:"flex justify-center mt-4 gap-3",children:[(0,a.jsxs)(f.z,{variant:"outline",onClick:()=>k(v,"collection-photo-".concat(Date.now(),".jpg")),children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"Download"]}),(0,a.jsx)(f.z,{onClick:()=>N(null),children:"Close"})]})]})})]})})}},893:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(7437),n=s(9376),r=s(2265),i=s(2381),c=s(2489),l=s(6337),d=s(9090),o=s(7806);function x(e){let{children:t}=e,s=(0,n.useRouter)(),[x,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check",{credentials:"include",headers:{Accept:"application/json"}});e.ok&&(await e.json()).isAuthenticated?u(!0):y(!0)}catch(e){y(!0)}finally{m(!1)}}()},[]);let g=()=>{s.push("/")};return x?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!h&&f?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,a.jsx)("div",{className:"fixed z-50 w-full max-w-md mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-8 text-center relative",children:[(0,a.jsx)("button",{onClick:g,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-green-100 mt-2",children:"Please sign in to access this page"})]}),(0,a.jsxs)("div",{className:"px-6 py-8",children:[(0,a.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"You need to be signed in to view this content. Create an account or sign in to continue."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(i.z,{onClick:()=>{s.push("/auth/signin")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"Sign In"]}),(0,a.jsxs)(i.z,{onClick:()=>{s.push("/auth/signup")},variant:"outline",className:"w-full border-2 border-green-600 text-green-600 hover:bg-green-50 py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),"Create Account"]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Return to Home Page"})})]})]})})]}):(0,a.jsx)(a.Fragment,{children:t})}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(7437),n=s(2265),r=s(7053),i=s(7712),c=s(3448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...o}=e,x=d?r.g7:"button";return(0,a.jsx)(x,{className:(0,c.cn)(l({variant:n,size:i,className:s})),ref:t,...o})});d.displayName="Button"},9820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var a=s(7437),n=s(2265),r=s(3448);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});c.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(1994),n=s(3335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[73,64,448,971,117,744],function(){return e(e.s=6773)}),_N_E=e.O()}]);