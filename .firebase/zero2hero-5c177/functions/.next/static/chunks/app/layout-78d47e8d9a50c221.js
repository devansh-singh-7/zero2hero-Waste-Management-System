(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2443:function(e,t,a){Promise.resolve().then(a.bind(a,5378))},5378:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var s=a(7437),r=a(3330),n=a.n(r),i=a(2265);a(2778);var o=a(7648),l=a(9376),c=a(2381),d=a(4938),u=a(3327),f=a(3774),m=a(9474),h=a(5805),p=a(8728),x=a(4766),g=a(3417),y=a(6215),b=a(525),j=a(8293),w=a(9547),v=a(3247),N=a(9232),k=a(7845),S=a(407),C=a(401),E=a(519),Z=a(3448);let z=k.fC,A=k.xz;k.ZA,k.Uv,k.Tr,k.Ee,i.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...i}=e;return(0,s.jsxs)(k.fF,{ref:t,className:(0,Z.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...i,children:[n,(0,s.jsx)(S.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=k.fF.displayName,i.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(k.tu,{ref:t,className:(0,Z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=k.tu.displayName;let R=i.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(k.Uv,{children:(0,s.jsx)(k.VY,{ref:t,sideOffset:r,className:(0,Z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});R.displayName=k.VY.displayName;let I=i.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(k.ck,{ref:t,className:(0,Z.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});I.displayName=k.ck.displayName,i.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...i}=e;return(0,s.jsxs)(k.oC,{ref:t,className:(0,Z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(k.wU,{children:(0,s.jsx)(C.Z,{className:"h-4 w-4"})})}),r]})}).displayName=k.oC.displayName,i.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(k.Rk,{ref:t,className:(0,Z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(k.wU,{children:(0,s.jsx)(E.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=k.Rk.displayName,i.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(k.__,{ref:t,className:(0,Z.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=k.__.displayName;let L=i.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(k.Z0,{ref:t,className:(0,Z.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});L.displayName=k.Z0.displayName;var P=a(9174);function T(){let[e,t]=(0,i.useState)(0),a=async()=>{try{let e=await fetch("/api/user/balance",{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(e.ok){let a=await e.json();t(a.balance||0)}else t(0)}catch(e){t(0)}};return(0,i.useEffect)(()=>{a();let e=setInterval(a,5e3),t=e=>{"userEmail"===e.key&&a()},s=()=>{a()};return window.addEventListener("storage",t),window.addEventListener("balanceUpdate",s),()=>{clearInterval(e),window.removeEventListener("storage",t),window.removeEventListener("balanceUpdate",s)}},[]),(0,s.jsx)("div",{className:"text-white",children:e})}var O=a(2369),U=a(8906),V=a(7692);function F(e){let{userName:t,onLogout:a}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(A,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,s.jsx)(O.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"hidden md:inline",children:t||"User"})]})}),(0,s.jsxs)(R,{align:"end",className:"w-56",children:[(0,s.jsxs)("div",{className:"flex flex-col px-2 py-1.5",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Welcome,"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:t||"User"})]}),(0,s.jsx)(L,{}),(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(o.default,{href:"/profile",className:"cursor-pointer flex items-center w-full",children:[(0,s.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Profile"})]})}),(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(o.default,{href:"/settings",className:"cursor-pointer flex items-center w-full",children:[(0,s.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Settings"})]})}),(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(o.default,{href:"/admin/login",className:"cursor-pointer flex items-center w-full",children:[(0,s.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Admin Portal"})]})}),(0,s.jsx)(L,{}),(0,s.jsxs)(I,{onClick:a,className:"cursor-pointer",children:[(0,s.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Log out"})]})]})]})}function H(e){let{onMenuClick:t}=e,a=(0,l.usePathname)(),r=(0,l.useRouter)(),[n,k]=(0,i.useState)([]),[S,C]=(0,i.useState)(!1),[E,L]=(0,i.useState)(!0),[O,U]=(0,i.useState)(!1),[V,H]=(0,i.useState)(""),[_,W]=(0,i.useState)(""),[D,M]=(0,i.useState)(!1),J=function(e){let[t,a]=(0,i.useState)(null),[s,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{r(!0);let t=window.matchMedia(e);a(t.matches);let s=e=>{a(e.matches)};return t.addEventListener("change",s),()=>{t.removeEventListener("change",s)}},[e]),!!s&&null!=t&&t}("(max-width: 768px)"),B=[{id:"home",type:"page",title:"Home",description:"Return to the main dashboard",path:"/",keywords:["home","dashboard","main"],icon:d.Z,category:"Navigation"},{id:"rewards",type:"page",title:"Rewards & Badges",description:"View your rewards and achievements",path:"/rewards",keywords:["rewards","badges","achievements","points"],icon:u.Z,category:"Features"},{id:"report",type:"action",title:"Report Waste",description:"Submit waste and earn points",path:"/rewards/report",keywords:["report","submit","waste","photo","upload"],icon:f.Z,category:"Actions"},{id:"leaderboard",type:"page",title:"Leaderboard",description:"View top contributors",path:"/leaderboard",keywords:["leaderboard","rankings","top","scores"],icon:m.Z,category:"Community"},{id:"profile",type:"page",title:"My Profile",description:"View your profile and stats",path:"/profile",keywords:["profile","account","me","stats"],icon:h.Z,category:"Account"},{id:"settings",type:"page",title:"Settings",description:"Manage account preferences",path:"/settings",keywords:["settings","preferences","privacy"],icon:p.Z,category:"Account"},{id:"notifications",type:"page",title:"Notifications",description:"View your notifications",path:"/notifications",keywords:["notifications","alerts","updates"],icon:x.Z,category:"Updates"},{id:"messages",type:"page",title:"AI Assistant",description:"Chat with AI for help",path:"/messages",keywords:["messages","chat","ai","help","assistant"],icon:g.Z,category:"Help"},{id:"admin",type:"page",title:"Admin Dashboard",description:"Access admin panel",path:"/admin",keywords:["admin","dashboard","management"],icon:y.Z,category:"Admin"},{id:"earn",type:"feature",title:"Earn Points",description:"Submit reports to earn rewards",path:"/rewards/report",keywords:["earn","points","tokens","money"],icon:b.Z,category:"Features"}],Y=e=>{if(!e.trim())return[];let t=e.toLowerCase().trim();return B.filter(e=>{let a=e.title.toLowerCase().includes(t),s=e.description.toLowerCase().includes(t),r=e.keywords.some(e=>e.includes(t));return a||s||r}).slice(0,6)},q=null==a?void 0:a.startsWith("/auth/");(0,i.useEffect)(()=>{U(!0)},[]),(0,i.useEffect)(()=>{let e=!0,t=async()=>{if(e)try{L(!0);let t=await fetch("/api/auth/check",{credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(t.ok){let a=await t.json();if(e){C(!0);let e=a.user;H((null==e?void 0:e.name)||(null==e?void 0:e.email)||"User")}}else e&&(C(!1),H(""))}catch(t){e&&(C(!1),H(""))}finally{e&&L(!1)}};t();let a=e=>{"userEmail"===e.key&&t()};return window.addEventListener("storage",a),()=>{e=!1,window.removeEventListener("storage",a)}},[a]),(0,i.useEffect)(()=>{let e=!0,t=async()=>{if(S&&e)try{let t=await fetch("/api/user/notifications",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.ok){let a=await t.json();e&&k(Array.isArray(a)?a:[])}else e&&k([])}catch(t){e&&k([])}};return S&&!E&&t(),()=>{e=!1}},[S,E]);let G=async()=>{try{(await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache"}})).ok?(C(!1),k([]),H(""),localStorage.removeItem("authToken"),r.push("/auth/signin")):(C(!1),H(""),k([]))}catch(e){C(!1),H(""),k([])}},K=async e=>{try{(await fetch("/api/user/notifications/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({isRead:!0}),credentials:"include"})).ok&&k(t=>t.filter(t=>t.id!==e))}catch(e){}},Q=e=>{e.preventDefault(),_.trim()&&r.push("/search?q=".concat(encodeURIComponent(_.trim())))};return(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.z,{variant:"ghost",size:"icon",className:"mr-2 md:mr-4",onClick:t,children:(0,s.jsx)(j.Z,{className:"h-6 w-6"})}),(0,s.jsxs)(o.default,{href:"/",className:"flex items-center",children:[(0,s.jsx)(w.Z,{className:"h-6 w-6 md:h-8 md:w-8 text-green-500 mr-1 md:mr-2"}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("span",{className:"font-bold text-base md:text-lg text-gray-800",children:"Zero2Hero"})})]})]}),O&&!J&&(0,s.jsx)("div",{className:"flex-1 max-w-xl mx-4",children:(0,s.jsxs)("form",{onSubmit:Q,className:"relative",children:[(0,s.jsx)("input",{type:"text",value:_,onChange:e=>{W(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&Q(e)},onFocus:()=>M(!0),onBlur:()=>setTimeout(()=>M(!1),200),placeholder:"Search for rewards, tasks, or locations...",className:(0,Z.cn)("w-full px-4 py-2 border rounded-full focus:outline-none transition-all duration-200",D?"border-green-500 ring-2 ring-green-200 bg-white":"border-gray-300 bg-gray-50 hover:bg-white")}),(0,s.jsx)("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200",children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})}),D&&_.length>0&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-80 overflow-y-auto",children:Y(_).length>0?(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("div",{className:"px-4 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Quick Navigation"}),Y(_).map((e,t)=>(0,s.jsxs)("button",{type:"button",onMouseDown:t=>{t.preventDefault(),r.push(e.path),W(""),M(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-green-50 flex items-center gap-3 transition-colors",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat("page"===e.type?"bg-blue-100 text-blue-600":"feature"===e.type?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"),children:e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]}),(0,s.jsx)("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:e.category})]},e.id))]}):(0,s.jsxs)("div",{className:"px-4 py-6 text-center",children:[(0,s.jsx)(v.Z,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:['No results for "',_,'"']}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Try different keywords"})]})}),D&&0===_.length&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-50 overflow-hidden",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("div",{className:"px-4 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Popular Pages"}),[{title:"Report Waste",path:"/rewards/report",desc:"Submit waste and earn points"},{title:"View Rewards",path:"/rewards",desc:"Check your badges and achievements"},{title:"Leaderboard",path:"/leaderboard",desc:"See top contributors"},{title:"My Profile",path:"/profile",desc:"View your stats and info"}].map(e=>(0,s.jsxs)("button",{type:"button",onMouseDown:t=>{t.preventDefault(),r.push(e.path),M(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-green-50 flex items-center gap-3 transition-colors",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.desc})]})]},e.path))]})})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[O&&J&&(0,s.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>r.push("/search"),className:"hover:bg-green-50",children:(0,s.jsx)(v.Z,{className:"h-5 w-5"})}),!q&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(z,{children:[(0,s.jsx)(A,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"ghost",size:"icon",className:"relative hover:bg-gray-100",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 text-gray-600"}),n.length>0&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)(P.C,{variant:"destructive",className:"h-5 w-5 flex items-center justify-center p-0",children:n.length>9?"9+":n.length})})]})}),(0,s.jsxs)(R,{align:"end",className:"w-80 max-h-96 overflow-y-auto",children:[(0,s.jsx)("div",{className:"px-2 py-1.5 text-sm font-semibold border-b",children:"Notifications"}),n.length>0?(0,s.jsxs)(s.Fragment,{children:[n.slice(0,5).map(e=>(0,s.jsxs)(I,{onClick:()=>K(e.id),className:"px-3 py-2 cursor-pointer flex flex-col items-start gap-1",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-gray-500 capitalize",children:e.type}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,s.jsx)("span",{className:"text-sm text-gray-800",children:e.message})]},e.id)),n.length>5&&(0,s.jsxs)("div",{className:"px-3 py-1 text-xs text-gray-500 text-center border-t",children:["... and ",n.length-5," more"]}),(0,s.jsx)(I,{asChild:!0,className:"border-t",children:(0,s.jsx)(o.default,{href:"/notifications",className:"px-3 py-2 text-center w-full text-sm font-medium text-green-600 hover:text-green-700",children:"View All Notifications"})})]}):(0,s.jsx)("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No new notifications"})]})]}),!O||E?(0,s.jsx)(c.z,{onClick:()=>r.push("/auth/signin"),variant:"default",className:"ml-2",children:"Sign In"}):(0,s.jsx)(s.Fragment,{children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:" bg-green-300 border border-green-200 rounded-full px-3 py-1 flex items-center",children:[(0,s.jsx)(N.Z,{className:"h-4 w-4 text-green-500 mr-1"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-700",children:(0,s.jsx)(T,{})})]}),(0,s.jsx)(F,{userName:V,onLogout:G})]}):(0,s.jsx)(c.z,{onClick:()=>r.push("/auth/signin"),variant:"default",className:"ml-2",children:"Sign In"})})]})]})]})})}var _=a(6142);let W=[{href:"/",icon:d.Z,label:"Home"},{href:"/rewards/report",icon:f.Z,label:"Report Waste"},{href:"/rewards",icon:N.Z,label:"Rewards"},{href:"/leaderboard",icon:_.Z,label:"Leaderboard"},{href:"/profile",icon:O.Z,label:"Profile"}];function D(e){let{open:t}=e,a=(0,l.usePathname)();return(0,s.jsx)("aside",{className:"bg-white border-r pt-20 border-gray-200 text-gray-800 w-64 fixed inset-y-0 left-0 z-30 transform transition-transform duration-300 ease-in-out ".concat(t?"translate-x-0":"-translate-x-full"," lg:translate-x-0"),children:(0,s.jsxs)("nav",{className:"h-full flex flex-col justify-between",children:[(0,s.jsx)("div",{className:"px-4 py-6 space-y-8",children:W.map(e=>(0,s.jsx)(o.default,{href:e.href,passHref:!0,children:(0,s.jsxs)(c.z,{variant:a===e.href?"secondary":"ghost",className:"w-full justify-start py-3 ".concat(a===e.href?"bg-green-100 text-green-800":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),(0,s.jsx)("span",{className:"text-base",children:e.label})]})},e.href))}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 space-y-2",children:(0,s.jsx)(o.default,{href:"/settings",passHref:!0,children:(0,s.jsxs)(c.z,{variant:"/settings"===a?"secondary":"outline",className:"w-full py-3 ".concat("/settings"===a?"bg-green-100 text-green-800":"text-gray-600 border-gray-300 hover:bg-gray-100"),children:[(0,s.jsx)(p.Z,{className:"mr-3 h-5 w-5"}),(0,s.jsx)("span",{className:"text-base",children:"Settings"})]})})})]})})}var M=a(9064),J=a(3310);function B(){let[e,t]=(0,i.useState)(!1),a=(0,l.useRouter)(),r=(0,l.usePathname)();return((0,i.useEffect)(()=>{let e;let s=()=>t(!0),r=()=>t(!1),n=()=>{s(),e=setTimeout(()=>{r()},1e3)},i=a.push,o=a.replace;return a.push=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return n(),i.apply(a,t)},a.replace=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return n(),o.apply(a,t)},()=>{a.push=i,a.replace=o,e&&clearTimeout(e)}},[a]),(0,i.useEffect)(()=>{t(!1)},[r]),e)?(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50",children:(0,s.jsx)("div",{className:"h-1 bg-blue-500 animate-pulse",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-transparent via-white to-transparent animate-shimmer"})})}):null}function Y(e){let{children:t}=e,[a,r]=(0,i.useState)(!1);return(0,s.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,s.jsxs)("head",{children:[(0,s.jsx)("link",{rel:"dns-prefetch",href:"//fonts.googleapis.com"}),(0,s.jsx)("link",{rel:"preconnect",href:"//fonts.gstatic.com",crossOrigin:"anonymous"})]}),(0,s.jsx)("body",{className:n().className,children:(0,s.jsxs)(J.H,{children:[(0,s.jsx)(B,{}),(0,s.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,s.jsx)(H,{onMenuClick:()=>r(!a)}),(0,s.jsxs)("div",{className:"flex flex-1",children:[(0,s.jsx)(D,{open:a}),(0,s.jsx)("main",{className:"flex-1 p-4 lg:p-8 ml-0 lg:ml-64 transition-all duration-300",children:t})]})]}),(0,s.jsx)(M.x7,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#ffffff",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:"500"},success:{style:{background:"#ffffff",color:"#059669",border:"1px solid #d1fae5"},iconTheme:{primary:"#059669",secondary:"#ffffff"}},error:{style:{background:"#ffffff",color:"#dc2626",border:"1px solid #fecaca"},iconTheme:{primary:"#dc2626",secondary:"#ffffff"}},loading:{style:{background:"#ffffff",color:"#3b82f6",border:"1px solid #dbeafe"},iconTheme:{primary:"#3b82f6",secondary:"#ffffff"}}}})]})})]})}},3310:function(e,t,a){"use strict";a.d(t,{H:function(){return i},a:function(){return o}});var s=a(7437),r=a(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),u=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/auth/check");if(!e.ok)throw Error("Authentication check failed: ".concat(e.status));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Invalid response type from server");let a=await e.json();a.isAuthenticated&&a.user?(i(a.user),localStorage.setItem("userEmail",a.user.email),localStorage.setItem("user",JSON.stringify(a.user))):(i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"))}catch(t){let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){localStorage.removeItem("user"),i(null)}else i(null);localStorage.removeItem("userEmail"),d("Failed to check authentication status")}finally{l(!1)}},[]);(0,r.useEffect)(()=>{u()},[u]);let f=async(e,t)=>{try{l(!0),d(null);let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok){let e=await a.json();throw Error(e.error||"Login failed")}let s=a.headers.get("content-type");if(!s||!s.includes("application/json"))throw Error("Invalid response type from server");let r=await a.json();if(r.user)i(r.user),localStorage.setItem("userEmail",r.user.email);else throw Error("Invalid login response")}catch(e){throw d(e instanceof Error?e.message:"Login failed"),e}finally{l(!1)}},m=async()=>{try{if(l(!0),d(null),!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw Error("Logout failed");i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){throw d("Logout failed"),e}finally{l(!1)}},h=async(e,t,a)=>{try{l(!0),d(null);let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:a})}),r=await s.json();if(!s.ok)throw Error(r.error||"Signup failed");i(r.user)}catch(e){throw d(e instanceof Error?e.message:"Signup failed"),e}finally{l(!1)}};return(0,s.jsx)(n.Provider,{value:{user:a,loading:o,error:c,login:f,logout:m,signup:h},children:t})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9174:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var s=a(7437);a(2265);var r=a(7712),n=a(3448);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},2381:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var s=a(7437),r=a(2265),n=a(7053),i=a(7712),o=a(3448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:r,size:i,className:a})),ref:t,...d})});c.displayName="Button"},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},2778:function(){}},function(e){e.O(0,[410,73,64,448,944,971,117,744],function(){return e(e.s=2443)}),_N_E=e.O()}]);