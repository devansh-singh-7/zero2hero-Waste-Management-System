(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777],{5508:function(e,t,s){Promise.resolve().then(s.bind(s,9040))},4315:function(e,t,s){"use strict";s.d(t,{Am:function(){return a.Am}});var a=s(9064)},9040:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),r=s(29),n=s.n(r),d=s(2265),i=s(6540),l=s(3581),o=s(2023),c=s(3774),x=s(1671),m=s(7689),f=s(6858),u=s(2660),h=s(2381),b=s(4315),j=s(9376),g=s(3310),p=s(893);let y=(0,s(166).default)(()=>Promise.all([s.e(641),s.e(212),s.e(758)]).then(s.bind(s,4758)),{loadableGenerated:{webpack:()=>[4758]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"h-[400px] bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-green-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading map..."})]})})});function v(e){let{currentStep:t,totalSteps:s}=e,r=[{num:1,label:"Upload",icon:l.Z},{num:2,label:"Verify",icon:o.Z},{num:3,label:"Location",icon:c.Z},{num:4,label:"Submit",icon:x.Z}];return(0,a.jsx)("div",{className:"flex items-center justify-center mb-8",children:r.slice(0,s).map((e,r)=>{let n=t===e.num,d=t>e.num,i=e.icon;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"\n                w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\n                ".concat(n?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg shadow-green-200 scale-110":d?"bg-green-500 text-white":"bg-gray-200 text-gray-400","\n              "),children:d?(0,a.jsx)(x.Z,{className:"w-6 h-6"}):(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"text-xs mt-2 font-medium ".concat(n?"text-green-600":d?"text-green-500":"text-gray-400"),children:e.label})]}),r<s-1&&(0,a.jsx)("div",{className:"w-16 h-1 mx-2 rounded-full transition-all duration-300 ".concat(t>e.num?"bg-green-500":"bg-gray-200")})]},e.num)})})}function w(){return(0,a.jsx)(p.Z,{children:(0,a.jsx)(N,{})})}function N(){let{user:e}=(0,g.a)(),t=(0,j.useRouter)(),[s,r]=(0,d.useState)(1),[l,p]=(0,d.useState)(null),[w,N]=(0,d.useState)(null),[k,S]=(0,d.useState)(null),[C,I]=(0,d.useState)("idle"),[A,E]=(0,d.useState)(null),[T,Z]=(0,d.useState)(!1),z=(0,d.useCallback)(s=>!!e||(b.Am.error("Please sign in to ".concat(s)),t.push("/auth/signin?from="+encodeURIComponent(window.location.pathname)),!1),[e,t]),D=(0,d.useCallback)(e=>{S(e),b.Am.success("Location selected successfully")},[]),F=(0,d.useCallback)(e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];p(t);let s=new FileReader;s.onload=e=>{var t;N(null===(t=e.target)||void 0===t?void 0:t.result)},s.readAsDataURL(t),setTimeout(()=>r(2),500)}},[]),P=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=s,a.readAsDataURL(e)}),R=async()=>{if(z("verify waste")){if(!l){b.Am.error("Please upload an image first"),r(1);return}I("verifying");try{let e=await P(l),t=await fetch("/api/verify-waste",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:e.split(",")[1],mimeType:l.type||"image/jpeg"})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to verify waste")}let s=await t.json(),a={wasteType:"string"==typeof s.wasteType?s.wasteType.trim():"",quantity:"string"==typeof s.quantity?s.quantity.trim():"",confidence:"number"==typeof s.confidence?Math.max(0,Math.min(1,s.confidence)):.5,hazards:"string"==typeof s.hazards?s.hazards.trim():"None"};if(!a.wasteType)throw Error("Waste type not detected");if(!a.quantity)throw Error("Quantity not detected");E(a),I("success"),b.Am.success("Waste verified successfully!"),setTimeout(()=>r(3),800)}catch(e){I("failure"),b.Am.error(e instanceof Error?e.message:"Failed to verify waste")}}},L=async e=>{if(e.preventDefault(),z("submit a waste report")){if(!k){b.Am.error("Please select a location"),r(3);return}if("success"!==C){b.Am.error("Please verify the waste first"),r(2);return}Z(!0),b.Am.loading("Submitting your report...",{id:"submit-toast"});try{let e=await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify({location:k,wasteType:null==A?void 0:A.wasteType,amount:null==A?void 0:A.quantity,verificationResult:A,imageUrl:w})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to submit report")}let t=await e.json();b.Am.success("Report submitted! You earned ".concat(t.pointsEarned||10," points! \uD83C\uDF89"),{id:"submit-toast",duration:4e3}),window.dispatchEvent(new CustomEvent("balanceUpdate")),p(null),N(null),S(null),I("idle"),E(null),r(1)}catch(e){b.Am.error("Failed to submit report. Please try again.",{id:"submit-toast"})}finally{Z(!1)}}};return(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-4 md:p-8",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center mb-6",children:[(0,a.jsx)("h1",{className:"jsx-3f13d9933bde5ad8 text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 bg-clip-text text-transparent mb-2",children:"Report Waste"}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-gray-600",children:"Help the environment and earn rewards"})]}),(0,a.jsx)(v,{currentStep:s,totalSteps:4}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 overflow-hidden",children:(0,a.jsxs)("form",{onSubmit:L,className:"jsx-3f13d9933bde5ad8 p-6 md:p-8",children:[1===s&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 animate-fadeIn",children:[(0,a.jsx)("h2",{className:"jsx-3f13d9933bde5ad8 text-xl font-semibold text-gray-800 mb-6 text-center",children:"\uD83D\uDCF8 Upload Waste Image"}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 relative group cursor-pointer",children:(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 "+"border-3 border-dashed rounded-2xl p-8 md:p-12 transition-all duration-300 ".concat(w?"border-green-400 bg-green-50":"border-gray-300 hover:border-green-400 bg-gradient-to-br from-gray-50 to-green-50 hover:from-green-50 hover:to-emerald-50"),children:[w?(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center",children:[(0,a.jsx)("img",{src:w,alt:"Waste preview",className:"jsx-3f13d9933bde5ad8 max-h-64 mx-auto rounded-xl shadow-lg mb-4"}),(0,a.jsxs)("p",{className:"jsx-3f13d9933bde5ad8 text-green-600 font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Image uploaded successfully"]}),(0,a.jsx)("button",{type:"button",onClick:()=>{p(null),N(null)},className:"jsx-3f13d9933bde5ad8 mt-2 text-sm text-gray-500 hover:text-red-500 underline",children:"Remove and upload different image"})]}):(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center space-y-4",children:[(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 mx-auto w-20 h-20 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,a.jsx)(m.Z,{className:"h-10 w-10 text-green-600"})}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8",children:[(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-lg font-medium text-gray-700",children:"Click or drag to upload"}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-sm text-gray-500 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]}),(0,a.jsx)("input",{id:"waste-image",type:"file",onChange:F,accept:"image/*",className:"jsx-3f13d9933bde5ad8 absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),l&&(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-center mt-6",children:(0,a.jsxs)(h.z,{type:"button",onClick:()=>r(2),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-8 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-lg",children:["Continue to Verify",(0,a.jsx)(f.Z,{className:"w-5 h-5"})]})})]}),2===s&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 animate-fadeIn",children:[(0,a.jsx)("h2",{className:"jsx-3f13d9933bde5ad8 text-xl font-semibold text-gray-800 mb-6 text-center",children:"\uD83E\uDD16 AI Verification"}),w&&(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-center mb-6",children:(0,a.jsx)("img",{src:w,alt:"Waste",className:"jsx-3f13d9933bde5ad8 h-32 rounded-xl shadow-md"})}),"idle"===C&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center",children:[(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-gray-600 mb-6",children:"Our AI will analyze your image to identify the waste type and quantity"}),(0,a.jsxs)(h.z,{type:"button",onClick:R,className:"bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white px-10 py-4 rounded-xl font-semibold flex items-center gap-3 mx-auto shadow-lg",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Analyze with AI"]})]}),"verifying"===C&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center py-8",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 relative w-20 h-20 mx-auto mb-4",children:[(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 absolute inset-0 rounded-full border-4 border-purple-200"}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 absolute inset-0 rounded-full border-4 border-purple-500 border-t-transparent animate-spin"}),(0,a.jsx)(o.Z,{className:"absolute inset-0 m-auto w-8 h-8 text-purple-500 animate-pulse"})]}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-purple-600 font-semibold",children:"Analyzing your image..."}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-gray-500 text-sm mt-1",children:"This may take a few seconds"})]}),"success"===C&&A&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 space-y-6",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex items-center justify-center gap-2 mb-4",children:[(0,a.jsx)(x.Z,{className:"w-6 h-6 text-green-500"}),(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-green-700 font-semibold",children:"Verification Complete"})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 bg-white rounded-xl p-4 text-center shadow-sm",children:[(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-2xl font-bold text-green-700",children:A.wasteType}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-xs text-gray-500 uppercase tracking-wide mt-1",children:"Type"})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 bg-white rounded-xl p-4 text-center shadow-sm",children:[(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-2xl font-bold text-blue-700",children:A.quantity}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-xs text-gray-500 uppercase tracking-wide mt-1",children:"Quantity"})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 bg-white rounded-xl p-4 text-center shadow-sm",children:[(0,a.jsxs)("p",{className:"jsx-3f13d9933bde5ad8 text-2xl font-bold text-purple-700",children:[(100*A.confidence).toFixed(0),"%"]}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-xs text-gray-500 uppercase tracking-wide mt-1",children:"Confidence"})]})]})]}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-center",children:(0,a.jsxs)(h.z,{type:"button",onClick:()=>r(3),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-8 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-lg",children:["Continue to Location",(0,a.jsx)(f.Z,{className:"w-5 h-5"})]})})]}),"failure"===C&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 text-center py-6",children:[(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-3xl",children:"❌"})}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-red-600 font-medium mb-4",children:"Verification failed"}),(0,a.jsx)(h.z,{type:"button",onClick:R,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-2 rounded-xl",children:"Try Again"})]}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-start mt-6",children:(0,a.jsxs)("button",{type:"button",onClick:()=>r(1),className:"jsx-3f13d9933bde5ad8 text-gray-500 hover:text-gray-700 flex items-center gap-1 text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Back to Upload"]})})]}),3===s&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 animate-fadeIn",children:[(0,a.jsx)("h2",{className:"jsx-3f13d9933bde5ad8 text-xl font-semibold text-gray-800 mb-6 text-center",children:"\uD83D\uDCCD Select Location"}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 bg-gray-50 rounded-2xl p-4 mb-6",children:(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 h-[350px] rounded-xl overflow-hidden",children:(0,a.jsx)(y,{onLocationSelect:D,initialLocation:k||void 0})})}),k&&(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 text-center mb-6",children:(0,a.jsxs)("span",{className:"jsx-3f13d9933bde5ad8 inline-flex items-center gap-2 bg-green-100 text-green-700 px-4 py-2 rounded-full text-sm font-medium",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),k.lat.toFixed(6),", ",k.lng.toFixed(6)]})}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>r(2),className:"jsx-3f13d9933bde5ad8 text-gray-500 hover:text-gray-700 flex items-center gap-1 text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Back"]}),k&&(0,a.jsxs)(h.z,{type:"button",onClick:()=>r(4),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-8 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-lg",children:["Review & Submit",(0,a.jsx)(f.Z,{className:"w-5 h-5"})]})]})]}),4===s&&(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 animate-fadeIn",children:[(0,a.jsx)("h2",{className:"jsx-3f13d9933bde5ad8 text-xl font-semibold text-gray-800 mb-6 text-center",children:"✅ Review & Submit"}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 space-y-4 mb-8",children:[(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex flex-col items-center",children:[w&&(0,a.jsx)("img",{src:w,alt:"Waste",className:"jsx-3f13d9933bde5ad8 h-40 rounded-xl shadow-md mb-2"}),(0,a.jsx)("p",{className:"jsx-3f13d9933bde5ad8 text-sm text-gray-500",children:"Uploaded Image"})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center py-2 border-b border-green-200",children:[(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-gray-600",children:"Waste Type"}),(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 font-semibold text-green-700",children:null==A?void 0:A.wasteType})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center py-2 border-b border-green-200",children:[(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-gray-600",children:"Quantity"}),(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 font-semibold text-blue-700",children:null==A?void 0:A.quantity})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center py-2 border-b border-green-200",children:[(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-gray-600",children:"Confidence"}),(0,a.jsxs)("span",{className:"jsx-3f13d9933bde5ad8 font-semibold text-purple-700",children:[100*((null==A?void 0:A.confidence)||0),"%"]})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-3f13d9933bde5ad8 text-gray-600",children:"Location"}),(0,a.jsxs)("span",{className:"jsx-3f13d9933bde5ad8 font-semibold text-gray-700 text-sm",children:[null==k?void 0:k.lat.toFixed(4),", ",null==k?void 0:k.lng.toFixed(4)]})]})]})]})}),(0,a.jsx)("div",{className:"jsx-3f13d9933bde5ad8 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl p-4 border border-amber-200 text-center",children:(0,a.jsxs)("p",{className:"jsx-3f13d9933bde5ad8 text-amber-800",children:["\uD83C\uDF89 You'll earn approximately ",(0,a.jsx)("strong",{className:"jsx-3f13d9933bde5ad8",children:"10 points"})," for this report!"]})})]}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 flex justify-between items-center",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>r(3),className:"jsx-3f13d9933bde5ad8 text-gray-500 hover:text-gray-700 flex items-center gap-1 text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Back"]}),(0,a.jsx)(h.z,{type:"submit",disabled:T,className:"bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 text-white px-10 py-4 rounded-xl font-bold flex items-center gap-3 shadow-xl text-lg disabled:opacity-50",children:T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Submit Report"]})})]})]})]})}),(0,a.jsxs)("div",{className:"jsx-3f13d9933bde5ad8 mt-6 bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50",children:[(0,a.jsx)("h3",{className:"jsx-3f13d9933bde5ad8 font-semibold text-gray-700 mb-2",children:"\uD83D\uDCA1 Tips for better reports"}),(0,a.jsxs)("ul",{className:"jsx-3f13d9933bde5ad8 text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("li",{className:"jsx-3f13d9933bde5ad8",children:"• Take clear photos in good lighting"}),(0,a.jsx)("li",{className:"jsx-3f13d9933bde5ad8",children:"• Include multiple waste items in frame when possible"}),(0,a.jsx)("li",{className:"jsx-3f13d9933bde5ad8",children:"• Be as accurate as possible with location"})]})]})]}),(0,a.jsx)(n(),{id:"3f13d9933bde5ad8",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-fadeIn.jsx-3f13d9933bde5ad8{-webkit-animation:fadeIn.3s ease-out forwards;-moz-animation:fadeIn.3s ease-out forwards;-o-animation:fadeIn.3s ease-out forwards;animation:fadeIn.3s ease-out forwards}.border-3.jsx-3f13d9933bde5ad8{border-width:3px}"})]})}},893:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(7437),r=s(9376),n=s(2265),d=s(2381),i=s(2489),l=s(6337),o=s(9090),c=s(7806);function x(e){let{children:t}=e,s=(0,r.useRouter)(),[x,m]=(0,n.useState)(!0),[f,u]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check",{credentials:"include",headers:{Accept:"application/json"}});e.ok&&(await e.json()).isAuthenticated?u(!0):b(!0)}catch(e){b(!0)}finally{m(!1)}}()},[]);let j=()=>{s.push("/")};return x?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!f&&h?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,a.jsx)("div",{className:"fixed z-50 w-full max-w-md mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-8 text-center relative",children:[(0,a.jsx)("button",{onClick:j,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-green-100 mt-2",children:"Please sign in to access this page"})]}),(0,a.jsxs)("div",{className:"px-6 py-8",children:[(0,a.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"You need to be signed in to view this content. Create an account or sign in to continue."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(d.z,{onClick:()=>{s.push("/auth/signin")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),"Sign In"]}),(0,a.jsxs)(d.z,{onClick:()=>{s.push("/auth/signup")},variant:"outline",className:"w-full border-2 border-green-600 text-green-600 hover:bg-green-50 py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),"Create Account"]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:j,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Return to Home Page"})})]})]})})]}):(0,a.jsx)(a.Fragment,{children:t})}},3310:function(e,t,s){"use strict";s.d(t,{H:function(){return d},a:function(){return i}});var a=s(7437),r=s(2265);let n=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),x=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/auth/check");if(!e.ok)throw Error("Authentication check failed: ".concat(e.status));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Invalid response type from server");let s=await e.json();s.isAuthenticated&&s.user?(d(s.user),localStorage.setItem("userEmail",s.user.email),localStorage.setItem("user",JSON.stringify(s.user))):(d(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"))}catch(t){let e=localStorage.getItem("user");if(e)try{d(JSON.parse(e))}catch(e){localStorage.removeItem("user"),d(null)}else d(null);localStorage.removeItem("userEmail"),c("Failed to check authentication status")}finally{l(!1)}},[]);(0,r.useEffect)(()=>{x()},[x]);let m=async(e,t)=>{try{l(!0),c(null);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Login failed")}let a=s.headers.get("content-type");if(!a||!a.includes("application/json"))throw Error("Invalid response type from server");let r=await s.json();if(r.user)d(r.user),localStorage.setItem("userEmail",r.user.email);else throw Error("Invalid login response")}catch(e){throw c(e instanceof Error?e.message:"Login failed"),e}finally{l(!1)}},f=async()=>{try{if(l(!0),c(null),!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw Error("Logout failed");d(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){throw c("Logout failed"),e}finally{l(!1)}},u=async(e,t,s)=>{try{l(!0),c(null);let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:s})}),r=await a.json();if(!a.ok)throw Error(r.error||"Signup failed");d(r.user)}catch(e){throw c(e instanceof Error?e.message:"Signup failed"),e}finally{l(!1)}};return(0,a.jsx)(n.Provider,{value:{user:s,loading:i,error:o,login:m,logout:f,signup:u},children:t})}function i(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(7437),r=s(2265),n=s(7053),d=s(7712),i=s(3448);let l=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:d,asChild:o=!1,...c}=e,x=o?n.g7:"button";return(0,a.jsx)(x,{className:(0,i.cn)(l({variant:r,size:d,className:s})),ref:t,...c})});o.displayName="Button"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[73,64,796,971,117,744],function(){return e(e.s=5508)}),_N_E=e.O()}]);