(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{3725:function(e,t,r){Promise.resolve().then(r.bind(r,768))},3327:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3581:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},6215:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9090:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},4987:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]])},3229:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6595:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},525:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9474:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},7806:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4315:function(e,t,r){"use strict";r.d(t,{Am:function(){return s.Am}});var s=r(9064)},768:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var s=r(7437),a=r(2265),n=r(9474),i=r(2369),l=r(3581),c=r(2489),o=r(3229);let d=(0,r(9205).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var u=r(9345),m=r(1047),h=r(6215),f=r(4987),x=r(525),p=r(6595),g=r(3327),y=r(2381),v=r(9820),j=r(9174),b=r(279),N=r(3310),w=r(4315),k=r(893);function Z(){let{user:e,loading:t}=(0,N.a)(),[r,Z]=(0,a.useState)(null),[C,S]=(0,a.useState)(null),[E,M]=(0,a.useState)([]),[R,A]=(0,a.useState)(!0),[z,P]=(0,a.useState)(!1),[D,T]=(0,a.useState)(""),[I,F]=(0,a.useState)(!1),[O,H]=(0,a.useState)(!1),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{e&&L()},[e]),(0,a.useEffect)(()=>{C&&U()},[C]);let L=async()=>{try{let e=await fetch("/api/user/profile",{credentials:"include"});if(e.ok){let t=await e.json();Z(t.profile),T(t.profile.name||"")}else throw Error("Failed to load profile");let t=await fetch("/api/user/stats",{credentials:"include"});if(t.ok){let e=await t.json();S(e)}else S({totalReports:0,totalEarnings:0,completedTasks:0,currentRank:void 0,wasteCollected:"0 kg",co2Saved:"0 kg"});U()}catch(e){w.Am.error("Failed to load profile data")}finally{A(!1)}},U=()=>{M([{id:"first_report",title:"First Reporter",description:"Submit your first waste report",icon:"\uD83C\uDFAF",achieved:((null==C?void 0:C.totalReports)||0)>=1,progress:Math.min((null==C?void 0:C.totalReports)||0,1),total:1},{id:"waste_warrior",title:"Waste Warrior",description:"Report 10 waste incidents",icon:"⚔️",achieved:((null==C?void 0:C.totalReports)||0)>=10,progress:Math.min((null==C?void 0:C.totalReports)||0,10),total:10},{id:"environmental_guardian",title:"Environmental Guardian",description:"Report 25 waste incidents",icon:"\uD83C\uDF0D",achieved:((null==C?void 0:C.totalReports)||0)>=25,progress:Math.min((null==C?void 0:C.totalReports)||0,25),total:25},{id:"token_collector",title:"Token Collector",description:"Earn 100 tokens",icon:"\uD83D\uDCB0",achieved:((null==C?void 0:C.totalEarnings)||0)>=100,progress:Math.min((null==C?void 0:C.totalEarnings)||0,100),total:100},{id:"wealth_builder",title:"Wealth Builder",description:"Earn 500 tokens",icon:"\uD83D\uDC8E",achieved:((null==C?void 0:C.totalEarnings)||0)>=500,progress:Math.min((null==C?void 0:C.totalEarnings)||0,500),total:500},{id:"community_helper",title:"Community Helper",description:"Complete 5 collection tasks",icon:"\uD83E\uDD1D",achieved:((null==C?void 0:C.completedTasks)||0)>=5,progress:Math.min((null==C?void 0:C.completedTasks)||0,5),total:5},{id:"collection_expert",title:"Collection Expert",description:"Complete 20 collection tasks",icon:"\uD83D\uDE9B",achieved:((null==C?void 0:C.completedTasks)||0)>=20,progress:Math.min((null==C?void 0:C.completedTasks)||0,20),total:20},{id:"early_adopter",title:"Early Adopter",description:"One of the first users",icon:"\uD83C\uDF1F",achieved:!0,progress:1,total:1}])},V=async()=>{if(!D.trim()){w.Am.error("Name cannot be empty");return}F(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:D.trim()})}),t=await e.json();if(e.ok)Z(t.profile),P(!1),w.Am.success("Name updated successfully!");else throw Error(t.error||"Failed to update name")}catch(e){w.Am.error(e instanceof Error?e.message:"Failed to update name")}finally{F(!1)}},Y=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.type.startsWith("image/")){w.Am.error("Please select an image file");return}if(s.size>5242880){w.Am.error("Image size should be less than 5MB");return}H(!0);try{let e=new FileReader;e.onloadend=async()=>{let t=e.result;r&&Z({...r,image:t});let s=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({image:t})});if(s.ok){let e=await s.json();Z(e.profile),w.Am.success("Profile picture updated successfully!")}else throw Error("Failed to update profile picture")},e.readAsDataURL(s)}catch(e){w.Am.error("Failed to update profile picture"),L()}finally{H(!1),_.current&&(_.current.value="")}}};return t||R?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(n.Z,{className:"h-8 w-8 text-blue-500 mx-auto animate-spin"})})}):(0,s.jsx)(k.Z,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage your account and track your environmental impact"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)(v.Zb,{children:[(0,s.jsx)(v.Ol,{children:(0,s.jsxs)(v.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"h-5 w-5"}),"Profile Information"]})}),(0,s.jsxs)(v.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative w-24 h-24 mb-4",children:[(null==r?void 0:r.image)?(0,s.jsx)("img",{src:r.image,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-green-100"}):(0,s.jsx)("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center border-4 border-green-200",children:(0,s.jsx)(i.Z,{className:"h-12 w-12 text-green-600"})}),O&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,s.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:Y,className:"hidden"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(y.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},disabled:O,className:"flex items-center gap-2",children:O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),"Change Photo"]})}),(null==r?void 0:r.image)&&(0,s.jsxs)(y.z,{variant:"outline",size:"sm",onClick:async()=>{H(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({image:null})});if(e.ok){let t=await e.json();Z(t.profile),w.Am.success("Profile picture removed!")}}catch(e){w.Am.error("Failed to remove photo")}finally{H(!1)}},disabled:O,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Remove"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),z?(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,s.jsx)(b.I,{value:D,onChange:e=>T(e.target.value),placeholder:"Enter your name"}),(0,s.jsx)(y.z,{size:"sm",onClick:V,disabled:I,children:I?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,s.jsx)(o.Z,{className:"h-4 w-4"})}),(0,s.jsx)(y.z,{size:"sm",variant:"outline",onClick:()=>{P(!1),T((null==r?void 0:r.name)||"")},children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})]}):(0,s.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-900",children:null==r?void 0:r.name}),(0,s.jsx)(y.z,{size:"sm",variant:"ghost",onClick:()=>P(!0),children:(0,s.jsx)(d,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900",children:null==r?void 0:r.email})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Member Since"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900",children:(null==r?void 0:r.createdAt)?new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(v.Zb,{children:(0,s.jsx)(v.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==C?void 0:C.totalReports)||0})]}),(0,s.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-6 w-6 text-blue-600"})})]})})}),(0,s.jsx)(v.Zb,{children:(0,s.jsx)(v.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Waste Collected"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==C?void 0:C.wasteCollected)||"0 kg"})]}),(0,s.jsx)("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(f.Z,{className:"h-6 w-6 text-green-600"})})]})})}),(0,s.jsx)(v.Zb,{children:(0,s.jsx)(v.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"CO₂ Saved"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==C?void 0:C.co2Saved)||"0 kg"})]}),(0,s.jsx)("div",{className:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"h-6 w-6 text-purple-600"})})]})})}),(0,s.jsx)(v.Zb,{children:(0,s.jsx)(v.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Rank"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==C?void 0:C.currentRank)?"#".concat(C.currentRank):"Unranked"})]}),(0,s.jsx)("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"h-6 w-6 text-yellow-600"})})]})})})]}),(0,s.jsxs)(v.Zb,{children:[(0,s.jsxs)(v.Ol,{children:[(0,s.jsxs)(v.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"}),"Achievements"]}),(0,s.jsx)(v.SZ,{children:"Track your progress and unlock new achievements"})]}),(0,s.jsx)(v.aY,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(e=>(0,s.jsx)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(e.achieved?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),e.achieved&&(0,s.jsx)(j.C,{variant:"default",className:"bg-green-500",children:"Completed"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),!e.achieved&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:[e.progress,"/",e.total]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:"".concat(e.progress/e.total*100,"%")}})})]})]})]})},e.id))})})]})]})]})]})})})}},893:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(7437),a=r(9376),n=r(2265),i=r(2381),l=r(2489),c=r(6337),o=r(9090),d=r(7806);function u(e){let{children:t}=e,r=(0,a.useRouter)(),[u,m]=(0,n.useState)(!0),[h,f]=(0,n.useState)(!1),[x,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check",{credentials:"include",headers:{Accept:"application/json"}});e.ok&&(await e.json()).isAuthenticated?f(!0):p(!0)}catch(e){p(!0)}finally{m(!1)}}()},[]);let g=()=>{r.push("/")};return u?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!h&&x?(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,s.jsx)("div",{className:"fixed z-50 w-full max-w-md mx-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-fade-in",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-8 text-center relative",children:[(0,s.jsx)("button",{onClick:g,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:(0,s.jsx)(l.Z,{className:"h-5 w-5"})}),(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.Z,{className:"h-8 w-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),(0,s.jsx)("p",{className:"text-green-100 mt-2",children:"Please sign in to access this page"})]}),(0,s.jsxs)("div",{className:"px-6 py-8",children:[(0,s.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"You need to be signed in to view this content. Create an account or sign in to continue."}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(i.z,{onClick:()=>{r.push("/auth/signin")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5"}),"Sign In"]}),(0,s.jsxs)(i.z,{onClick:()=>{r.push("/auth/signup")},variant:"outline",className:"w-full border-2 border-green-600 text-green-600 hover:bg-green-50 py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5"}),"Create Account"]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Return to Home Page"})})]})]})})]}):(0,s.jsx)(s.Fragment,{children:t})}},3310:function(e,t,r){"use strict";r.d(t,{H:function(){return i},a:function(){return l}});var s=r(7437),a=r(2265);let n=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),u=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/auth/check");if(!e.ok)throw Error("Authentication check failed: ".concat(e.status));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Invalid response type from server");let r=await e.json();r.isAuthenticated&&r.user?(i(r.user),localStorage.setItem("userEmail",r.user.email),localStorage.setItem("user",JSON.stringify(r.user))):(i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"))}catch(t){let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){localStorage.removeItem("user"),i(null)}else i(null);localStorage.removeItem("userEmail"),d("Failed to check authentication status")}finally{c(!1)}},[]);(0,a.useEffect)(()=>{u()},[u]);let m=async(e,t)=>{try{c(!0),d(null);let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e=await r.json();throw Error(e.error||"Login failed")}let s=r.headers.get("content-type");if(!s||!s.includes("application/json"))throw Error("Invalid response type from server");let a=await r.json();if(a.user)i(a.user),localStorage.setItem("userEmail",a.user.email);else throw Error("Invalid login response")}catch(e){throw d(e instanceof Error?e.message:"Login failed"),e}finally{c(!1)}},h=async()=>{try{if(c(!0),d(null),!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw Error("Logout failed");i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){throw d("Logout failed"),e}finally{c(!1)}},f=async(e,t,r)=>{try{c(!0),d(null);let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),a=await s.json();if(!s.ok)throw Error(a.error||"Signup failed");i(a.user)}catch(e){throw d(e instanceof Error?e.message:"Signup failed"),e}finally{c(!1)}};return(0,s.jsx)(n.Provider,{value:{user:r,loading:l,error:o,login:m,logout:h,signup:f},children:t})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(7437);r(2265);var a=r(7712),n=r(3448);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(7437),a=r(2265),n=r(7053),i=r(7712),l=r(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:r})),ref:t,...d})});o.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var s=r(7437),a=r(2265),n=r(3448);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(7437),a=r(2265),n=r(3448);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(1994),a=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}}},function(e){e.O(0,[73,64,971,117,744],function(){return e(e.s=3725)}),_N_E=e.O()}]);