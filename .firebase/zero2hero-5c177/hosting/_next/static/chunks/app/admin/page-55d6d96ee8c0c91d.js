(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4907:function(e,s,t){Promise.resolve().then(t.bind(t,6683))},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6215:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4938:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6540:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},7692:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8728:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8906:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8930:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4315:function(e,s,t){"use strict";t.d(s,{Am:function(){return a.Am}});var a=t(9064)},6683:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(7437),r=t(2265),n=t(8906),l=t(7692),i=t(4938),c=t(8930),d=t(5805),o=t(6215),m=t(8728),h=t(3774),x=t(1047),u=t(525),f=t(2381),g=t(9820),y=t(4315),p=t(9376),j=t(2542),b=t(7648);function v(){let[e,s]=(0,r.useState)(null),[t,v]=(0,r.useState)({totalUsers:0,totalReports:0,pendingTasks:0,completedTasks:0,totalTokensDistributed:0}),[N,w]=(0,r.useState)(!0),k=(0,p.useRouter)(),Z=async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let t=await e.json();s(t.admin)}let t=Date.now(),a=await fetch("/api/admin/stats?t=".concat(t),{credentials:"include",cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(a.ok){let e=await a.json(),[s,r]=await Promise.all([fetch("/api/admin/users?t=".concat(t),{credentials:"include",cache:"no-store",headers:{"Cache-Control":"no-cache"}}),fetch("/api/admin/collection-tasks?t=".concat(t),{credentials:"include",cache:"no-store",headers:{"Cache-Control":"no-cache"}})]),n=s.ok?await s.json():[],l=r.ok?await r.json():{tasks:[]},i=Array.isArray(n)?n:[],c=Array.isArray(l.tasks)?l.tasks:[],d=c.filter(e=>"pending"===e.status).length,o=c.filter(e=>"completed"===e.status||"verified"===e.status).length;v({totalUsers:e.totalUsers||i.length,totalReports:e.totalReports||0,pendingTasks:d,completedTasks:o,totalTokensDistributed:i.reduce((e,s)=>e+(s.balance||0),0)})}else throw Error("Failed to fetch platform stats")}catch(e){y.Am.error("Failed to load dashboard data")}finally{w(!1)}};(0,r.useEffect)(()=>{Z()},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{Z()},1e4);return()=>clearInterval(e)},[]);let M=async()=>{try{await fetch("/api/admin/auth/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("adminEmail"),y.Am.success("Logged out successfully"),k.push("/admin/login")}catch(e){y.Am.error("Logout failed")}};return(0,a.jsx)(j.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Console"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Zero2Hero Waste Management"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",(null==e?void 0:e.name)||"Admin"]}),(0,a.jsxs)(f.z,{onClick:M,variant:"outline",size:"sm",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-screen",children:(0,a.jsx)("nav",{className:"p-6",children:(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsxs)(b.default,{href:"/admin",className:"flex items-center p-3 text-gray-700 rounded-lg bg-green-50 border border-green-200",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5 mr-3"}),"Dashboard"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(b.default,{href:"/admin/collections",className:"flex items-center p-3 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 mr-3"}),"Waste Collection"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(b.default,{href:"/admin/users",className:"flex items-center p-3 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 mr-3"}),"User Management"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(b.default,{href:"/admin/analytics",className:"flex items-center p-3 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 mr-3"}),"Analytics & Reports"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(b.default,{href:"/admin/settings",className:"flex items-center p-3 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-3"}),"Settings"]})})]})})}),(0,a.jsxs)("main",{className:"flex-1 p-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Dashboard Overview"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor and manage the Zero2Hero waste management system"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(g.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,a.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(g.ll,{className:"text-sm font-medium text-gray-700",children:"Total Users"}),(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"})})]}),(0,a.jsxs)(g.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Registered users"})]})]}),(0,a.jsxs)(g.Zb,{className:"border-l-4 border-l-green-500",children:[(0,a.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(g.ll,{className:"text-sm font-medium text-gray-700",children:"Total Reports"}),(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(h.Z,{className:"h-4 w-4 text-green-600"})})]}),(0,a.jsxs)(g.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.totalReports}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Waste reports submitted"})]})]}),(0,a.jsxs)(g.Zb,{className:"border-l-4 border-l-orange-500",children:[(0,a.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(g.ll,{className:"text-sm font-medium text-gray-700",children:"Pending Tasks"}),(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-4 w-4 text-orange-600"})})]}),(0,a.jsxs)(g.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.pendingTasks}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Awaiting collection"})]})]}),(0,a.jsxs)(g.Zb,{className:"border-l-4 border-l-purple-500",children:[(0,a.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(g.ll,{className:"text-sm font-medium text-gray-700",children:"Completed Tasks"}),(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(u.Z,{className:"h-4 w-4 text-purple-600"})})]}),(0,a.jsxs)(g.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.completedTasks}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Successfully collected"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(g.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsxs)(g.ll,{className:"flex items-center text-gray-800",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-600"})}),"Waste Collection"]}),(0,a.jsx)(g.SZ,{children:"Manage waste collection tasks and assignments"})]}),(0,a.jsx)(g.aY,{children:(0,a.jsx)(b.default,{href:"/admin/collections",children:(0,a.jsx)(f.z,{className:"w-full bg-black hover:bg-gray-800 text-white",children:"Open Collection Manager"})})})]}),(0,a.jsxs)(g.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsxs)(g.ll,{className:"flex items-center text-gray-800",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"})}),"User Management"]}),(0,a.jsx)(g.SZ,{children:"View and manage user accounts and permissions"})]}),(0,a.jsx)(g.aY,{children:(0,a.jsx)(b.default,{href:"/admin/users",children:(0,a.jsx)(f.z,{variant:"outline",className:"w-full",children:"Manage Users"})})})]}),(0,a.jsxs)(g.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsxs)(g.ll,{className:"flex items-center text-gray-800",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:(0,a.jsx)(o.Z,{className:"h-5 w-5 text-purple-600"})}),"Analytics"]}),(0,a.jsx)(g.SZ,{children:"View detailed reports and system analytics"})]}),(0,a.jsx)(g.aY,{children:(0,a.jsx)(b.default,{href:"/admin/analytics",children:(0,a.jsx)(f.z,{variant:"outline",className:"w-full",children:"View Reports"})})})]})]}),(0,a.jsx)("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"System Status: Online"})]}),(0,a.jsx)("div",{className:"ml-6 text-sm text-green-600",children:"Auto-refresh: Active (10s intervals)"})]})})})]})]})]})})}},2542:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(7437),r=t(2265),n=t(9376),l=t(6540),i=t(8906);function c(e){let{children:s}=e,[t,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),x=(0,n.useRouter)();return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let s=await e.json();s.isAdmin?(c(!0),h(s.admin)):x.push("/admin/login")}else x.push("/admin/login")}catch(e){x.push("/admin/login")}finally{o(!1)}})()},[x]),d)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-green-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verifying admin access..."})]})}):t?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this area."})]})})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(7437),r=t(2265),n=t(7053),l=t(7712),i=t(3448);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:d=!1,...o}=e,m=d?n.g7:"button";return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:r,size:l,className:t})),ref:s,...o})});d.displayName="Button"},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var a=t(7437),r=t(2265),n=t(3448);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[73,64,448,971,117,744],function(){return e(e.s=4907)}),_N_E=e.O()}]);