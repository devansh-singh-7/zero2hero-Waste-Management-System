(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{4651:function(e,t,r){Promise.resolve().then(r.bind(r,1902))},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9090:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},7806:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},4315:function(e,t,r){"use strict";r.d(t,{Am:function(){return n.Am}});var n=r(9064)},1902:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(7437),s=r(2265),a=r(9376),i=r(3310),o=r(1548),l=r(1817);let c=(0,r(9205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var u=r(4315),d=r(893);function h(){return(0,n.jsx)(d.Z,{children:(0,n.jsx)(f,{})})}function f(){let{user:e}=(0,i.a)(),t=(0,a.useRouter)(),[r,d]=(0,s.useState)([]),[h,f]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[x,y]=(0,s.useState)(""),p=(0,s.useRef)(null),v=r=>!!e||(u.Am.error("Please sign in to ".concat(r)),t.push("/auth/signin?from="+encodeURIComponent(window.location.pathname)),!1);(0,s.useEffect)(()=>{},[]),(0,s.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]);let b=async e=>{if(e.preventDefault(),!h.trim()||m||!v("send messages"))return;g(!0),y("");let t={role:"user",content:h.trim()};d(e=>[...e,t]),f("");try{let e="AIzaSyDHLYPDML0fOfyrSJW4vGeaMZDUa8BPcLM";if(!e)throw Error("API key is missing");let r=new o.$D(e).getGenerativeModel({model:"gemini-1.5-flash"}),n=(await r.generateContent({contents:[{role:"user",parts:[{text:t.content}]}]})).response.text(),s={role:"assistant",content:n};d(e=>[...e,s])}catch(e){y(e instanceof Error?e.message:"An unknown error occurred")}finally{g(!1)}};return(0,n.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map((e,t)=>(0,n.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,n.jsx)("div",{className:"max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl rounded-lg p-3 ".concat("user"===e.role?"bg-blue-500 text-white":"bg-white text-gray-800"),children:(0,n.jsx)("p",{children:e.content})})},t)),x&&(0,n.jsx)("p",{className:"text-red-500 text-center",children:x}),(0,n.jsx)("div",{ref:p})]}),(0,n.jsx)("form",{onSubmit:b,className:"p-4 bg-white border-t",children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Type your message here...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",disabled:m,children:m?(0,n.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}):(0,n.jsx)(c,{className:"w-5 h-5"})})]})})]})}},893:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(7437),s=r(9376),a=r(2265),i=r(2381),o=r(2489),l=r(6337),c=r(9090),u=r(7806);function d(e){let{children:t}=e,r=(0,s.useRouter)(),[d,h]=(0,a.useState)(!0),[f,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check",{credentials:"include",headers:{Accept:"application/json"}});e.ok&&(await e.json()).isAuthenticated?m(!0):x(!0)}catch(e){x(!0)}finally{h(!1)}}()},[]);let y=()=>{r.push("/")};return d?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!f&&g?(0,n.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,n.jsx)("div",{className:"fixed z-50 w-full max-w-md mx-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-fade-in",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-8 text-center relative",children:[(0,n.jsx)("button",{onClick:y,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:(0,n.jsx)(o.Z,{className:"h-5 w-5"})}),(0,n.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(l.Z,{className:"h-8 w-8 text-white"})}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),(0,n.jsx)("p",{className:"text-green-100 mt-2",children:"Please sign in to access this page"})]}),(0,n.jsxs)("div",{className:"px-6 py-8",children:[(0,n.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"You need to be signed in to view this content. Create an account or sign in to continue."}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)(i.z,{onClick:()=>{r.push("/auth/signin")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,n.jsx)(c.Z,{className:"h-5 w-5"}),"Sign In"]}),(0,n.jsxs)(i.z,{onClick:()=>{r.push("/auth/signup")},variant:"outline",className:"w-full border-2 border-green-600 text-green-600 hover:bg-green-50 py-6 text-lg font-medium rounded-xl flex items-center justify-center gap-2",children:[(0,n.jsx)(u.Z,{className:"h-5 w-5"}),"Create Account"]})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Return to Home Page"})})]})]})})]}):(0,n.jsx)(n.Fragment,{children:t})}},3310:function(e,t,r){"use strict";r.d(t,{H:function(){return i},a:function(){return o}});var n=r(7437),s=r(2265);let a=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/auth/check");if(!e.ok)throw Error("Authentication check failed: ".concat(e.status));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Invalid response type from server");let r=await e.json();r.isAuthenticated&&r.user?(i(r.user),localStorage.setItem("userEmail",r.user.email),localStorage.setItem("user",JSON.stringify(r.user))):(i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"))}catch(t){let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){localStorage.removeItem("user"),i(null)}else i(null);localStorage.removeItem("userEmail"),u("Failed to check authentication status")}finally{l(!1)}},[]);(0,s.useEffect)(()=>{d()},[d]);let h=async(e,t)=>{try{l(!0),u(null);let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e=await r.json();throw Error(e.error||"Login failed")}let n=r.headers.get("content-type");if(!n||!n.includes("application/json"))throw Error("Invalid response type from server");let s=await r.json();if(s.user)i(s.user),localStorage.setItem("userEmail",s.user.email);else throw Error("Invalid login response")}catch(e){throw u(e instanceof Error?e.message:"Login failed"),e}finally{l(!1)}},f=async()=>{try{if(l(!0),u(null),!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw Error("Logout failed");i(null),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){throw u("Logout failed"),e}finally{l(!1)}},m=async(e,t,r)=>{try{l(!0),u(null);let n=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),s=await n.json();if(!n.ok)throw Error(s.error||"Signup failed");i(s.user)}catch(e){throw u(e instanceof Error?e.message:"Signup failed"),e}finally{l(!1)}};return(0,n.jsx)(a.Provider,{value:{user:r,loading:o,error:c,login:h,logout:f,signup:m},children:t})}function o(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),s=r(2265),a=r(7053),i=r(7712),o=r(3448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...u}=e,d=c?a.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...u})});c.displayName="Button"},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(1994),s=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[73,64,756,971,117,744],function(){return e(e.s=4651)}),_N_E=e.O()}]);