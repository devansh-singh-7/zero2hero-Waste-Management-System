(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{6534:function(e,t,n){"use strict";var r=n(759);n.o(r,"Icon")&&n.d(t,{Icon:function(){return r.Icon}})},4758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(7437),l=n(2265),a=n(1080);function o(){return(0,a.mE)().map}var u=n(8509),i=n(4171),c=n(7083),s=n(6534),f=n(3774),d=n(3247),p=n(2381);n(5046);let m=new s.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]});function g(e){let{center:t}=e,n=o();return(0,l.useEffect)(()=>{n.setView(t,n.getZoom())},[t,n]),null}function h(e){let{onLocationSelect:t,selectedLocation:n,setMapCenter:a}=e,i=function(e){let t=o();return(0,l.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}({click(e){let n={lat:e.latlng.lat,lng:e.latlng.lng};a([n.lat,n.lng]),i.setView([n.lat,n.lng],i.getZoom()),t(n)}});return n?(0,r.jsx)(u.J,{position:[n.lat,n.lng],icon:m}):null}function v(e){let{onLocationSelect:t,initialLocation:n}=e,[a,o]=(0,l.useState)(""),[u,s]=(0,l.useState)([]),[m,v]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(n?[n.lat,n.lng]:[20.5937,78.9629]),[j,I]=(0,l.useState)(n||null),C=async e=>{if(!e.trim()){s([]);return}v(!0);try{let t=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(e),"&limit=5")),n=await t.json();s(n)}catch(e){}finally{v(!1)}},O=async()=>{if(a.trim()){v(!0);try{let e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(a),"&limit=1")),n=await e.json();if(n&&n.length>0){let e={lat:parseFloat(n[0].lat),lng:parseFloat(n[0].lon)};w([e.lat,e.lng]),I(e),t(e)}}catch(e){}finally{v(!1),s([])}}},E=e=>{let n={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};w([n.lat,n.lng]),I(n),t(n),o(e.display_name),s([])};return(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsxs)("div",{className:"mb-3 flex gap-2",children:[(0,r.jsxs)(p.z,{onClick:()=>{navigator.geolocation&&(b(!0),navigator.geolocation.getCurrentPosition(e=>{let n={lat:e.coords.latitude,lng:e.coords.longitude};w([n.lat,n.lng]),I(n),t(n),b(!1)},e=>{b(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}))},disabled:x,className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600",size:"sm",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),x?"Getting Location...":"Use My Location"]}),j&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded",children:[(0,r.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),j.lat.toFixed(6),", ",j.lng.toFixed(6)]})]}),(0,r.jsxs)("div",{className:"relative mb-2 flex gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>{o(e.target.value),C(e.target.value)},onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"Search for a location or click on the map",className:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm"}),u.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:u.map((e,t)=>(0,r.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>E(e),children:e.display_name},t))})]}),(0,r.jsx)(p.z,{onClick:O,disabled:m,className:"px-4 py-2",size:"sm",children:m?"Searching...":(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"rounded-lg overflow-hidden border border-gray-300 h-[calc(100%-120px)]",children:(0,r.jsxs)(i.h,{center:y,zoom:13,style:{height:"100%",width:"100%"},className:"z-0",children:[(0,r.jsx)(c.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,r.jsx)(g,{center:y}),(0,r.jsx)(h,{selectedLocation:j,setMapCenter:w,onLocationSelect:e=>{I(e),t(e)}})]})})]})}},5046:function(){},1080:function(e,t,n){"use strict";n.d(t,{Hb:function(){return l},UO:function(){return u},mE:function(){return i},sj:function(){return a}});var r=n(2265);function l(e){return Object.freeze({__version:1,map:e})}function a(e,t){return Object.freeze({...e,...t})}let o=(0,r.createContext)(null),u=o.Provider;function i(){let e=(0,r.useContext)(o);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},2538:function(e,t,n){"use strict";n.d(t,{I:function(){return a},O:function(){return l}});var r=n(2265);function l(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function a(e,t){return null==t?function(t,n){let l=(0,r.useRef)();return l.current||(l.current=e(t,n)),l}:function(n,l){let a=(0,r.useRef)();a.current||(a.current=e(n,l));let o=(0,r.useRef)(n),{instance:u}=a.current;return(0,r.useEffect)(function(){o.current!==n&&(t(u,n,o.current),o.current=n)},[u,n,l]),a}}},6226:function(e,t,n){"use strict";n.d(t,{dW:function(){return f},SO:function(){return d},Lf:function(){return p}});var r=n(2265),l=n(4887),a=n(1080),o=n(2538);function u(e,t){let n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function i(e,t){let n=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}var c=n(8651);function s(e){return function(t){var n;let l=(0,a.mE)(),o=e((0,c.q)(t,l),l);return u(l.map,t.attribution),i(o.current,t.eventHandlers),n=o.current,(0,r.useEffect)(function(){return(l.layerContainer??l.map).addLayer(n.instance),function(){l.layerContainer?.removeLayer(n.instance),l.map.removeLayer(n.instance)}},[l,n]),o}}function f(e,t){var n;return n=s((0,o.I)(e,t)),(0,r.forwardRef)(function(e,t){let{instance:l,context:o}=n(e).current;return(0,r.useImperativeHandle)(t,()=>l),null==e.children?null:r.createElement(a.UO,{value:o},e.children)})}function d(e,t){var n,s;return n=(0,o.I)(e),s=function(e,r){let l=(0,a.mE)(),o=n((0,c.q)(e,l),l);return u(l.map,e.attribution),i(o.current,e.eventHandlers),t(o.current,l,e,r),o},(0,r.forwardRef)(function(e,t){let[n,a]=(0,r.useState)(!1),{instance:o}=s(e,a).current;(0,r.useImperativeHandle)(t,()=>o),(0,r.useEffect)(function(){n&&o.update()},[o,n,e.children]);let u=o._contentNode;return u?(0,l.createPortal)(e.children,u):null})}function p(e,t){var n;return n=s((0,o.I)(e,t)),(0,r.forwardRef)(function(e,t){let{instance:l}=n(e).current;return(0,r.useImperativeHandle)(t,()=>l),null})}},8651:function(e,t,n){"use strict";function r(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}n.d(t,{q:function(){return r}})},4171:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(1080),l=n(759),a=n(2265);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let u=(0,a.forwardRef)(function(e,t){let{bounds:n,boundsOptions:u,center:i,children:c,className:s,id:f,placeholder:d,style:p,whenReady:m,zoom:g,...h}=e,[v]=(0,a.useState)({className:s,id:f,style:p}),[x,b]=(0,a.useState)(null);(0,a.useImperativeHandle)(t,()=>{var e;return null!==(e=null==x?void 0:x.map)&&void 0!==e?e:null},[x]);let y=(0,a.useCallback)(e=>{if(null!==e&&null===x){let t=new l.Map(e,h);null!=i&&null!=g?t.setView(i,g):null!=n&&t.fitBounds(n,u),null!=m&&t.whenReady(m),b((0,r.Hb)(t))}},[]);(0,a.useEffect)(()=>()=>{null==x||x.map.remove()},[x]);let w=x?a.createElement(r.UO,{value:x},c):null!=d?d:null;return a.createElement("div",o({},v,{ref:y}),w)})},8509:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(6226),l=n(2538),a=n(1080),o=n(759);let u=(0,r.dW)(function(e,t){let{position:n,...r}=e,u=new o.Marker(n,r);return(0,l.O)(u,(0,a.sj)(t,{overlayContainer:u}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})},7083:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(6226),l=n(8651),a=n(2538),o=n(759);let u=(0,r.Lf)(function(e,t){let{url:n,...r}=e,u=new o.TileLayer(n,(0,l.q)(r,t));return(0,a.O)(u,t)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})}}]);