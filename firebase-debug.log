[debug] [2026-01-28T16:10:54.836Z] ----------------------------------------------------------------------
[debug] [2026-01-28T16:10:54.842Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\devan\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy
[debug] [2026-01-28T16:10:54.843Z] CLI Version:   15.4.0
[debug] [2026-01-28T16:10:54.843Z] Platform:      win32
[debug] [2026-01-28T16:10:54.844Z] Node Version:  v24.11.0
[debug] [2026-01-28T16:10:54.845Z] Time:          Wed Jan 28 2026 21:40:54 GMT+0530 (India Standard Time)
[debug] [2026-01-28T16:10:54.845Z] ----------------------------------------------------------------------
[debug] 
[debug] [2026-01-28T16:10:59.103Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2026-01-28T16:10:59.104Z] > authorizing via signed-in user (devanshsingh159753@gmail.com)
[debug] [2026-01-28T16:10:59.104Z] [iam] checking project zero2hero-5c177 for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2026-01-28T16:10:59.106Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:10:59.107Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:10:59.108Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/zero2hero-5c177:testIamPermissions [none]
[debug] [2026-01-28T16:10:59.108Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/zero2hero-5c177:testIamPermissions x-goog-quota-user=projects/zero2hero-5c177
[debug] [2026-01-28T16:10:59.109Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zero2hero-5c177:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2026-01-28T16:11:00.753Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/zero2hero-5c177:testIamPermissions 200
[debug] [2026-01-28T16:11:00.753Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zero2hero-5c177:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2026-01-28T16:11:00.755Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:00.755Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:00.756Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177 [none]
[debug] [2026-01-28T16:11:01.140Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177 200
[debug] [2026-01-28T16:11:01.141Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177 {"projectId":"zero2hero-5c177","projectNumber":"58387778294","displayName":"Zero2Hero","name":"projects/zero2hero-5c177","resources":{"hostingSite":"zero2hero-5c177"},"state":"ACTIVE","etag":"1_4207b231-a925-404f-abd7-dc2313e8d616"}
[debug] [2026-01-28T16:11:10.623Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:10.623Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:10.624Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites pageToken=&pageSize=10
[debug] [2026-01-28T16:11:12.616Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites 200
[debug] [2026-01-28T16:11:12.617Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites {"sites":[{"name":"projects/zero2hero-5c177/sites/zero2hero-5c177","defaultUrl":"https://zero2hero-5c177.web.app","type":"DEFAULT_SITE"},{"name":"projects/zero2hero-5c177/sites/zero2hero-waste-management","defaultUrl":"https://zero2hero-waste-management.web.app","appId":"1:58387778294:web:9740016b7123be81613ad7","type":"USER_SITE"}]}
[debug] [2026-01-28T16:11:12.618Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:12.618Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:12.618Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites 
[debug] [2026-01-28T16:11:13.004Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites 200
[debug] [2026-01-28T16:11:13.005Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites {"sites":[{"name":"projects/zero2hero-5c177/sites/zero2hero-5c177","defaultUrl":"https://zero2hero-5c177.web.app","type":"DEFAULT_SITE"},{"name":"projects/zero2hero-5c177/sites/zero2hero-waste-management","defaultUrl":"https://zero2hero-waste-management.web.app","appId":"1:58387778294:web:9740016b7123be81613ad7","type":"USER_SITE"}]}
[debug] [2026-01-28T16:11:13.005Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:13.005Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:13.005Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177/webApps/-/config [none]
[debug] [2026-01-28T16:11:13.719Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177/webApps/-/config 200
[debug] [2026-01-28T16:11:13.719Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zero2hero-5c177/webApps/-/config {"projectId":"zero2hero-5c177","appId":"1:58387778294:web:9740016b7123be81613ad7","storageBucket":"zero2hero-5c177.firebasestorage.app","apiKey":"AIzaSyArfPNoNgWcwYFo-hVOCq5P-YC3MiJghO4","authDomain":"zero2hero-5c177.firebaseapp.com","messagingSenderId":"58387778294","measurementId":"G-2Y3Y95GW3L","projectNumber":"58387778294","version":"2"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2026-01-28T16:11:31.740Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:31.740Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:11:31.740Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 [none]
[debug] [2026-01-28T16:11:33.507Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 200
[debug] [2026-01-28T16:11:33.508Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 {"name":"projects/zero2hero-5c177/sites/zero2hero-5c177","defaultUrl":"https://zero2hero-5c177.web.app","type":"DEFAULT_SITE"}
[info]   ▲ Next.js 14.2.31

[info]   - Environments: .env.local


[info]    Creating an optimized production build ...

[info]  ⚠ Compiled with warnings

./src/lib/customAuth.ts
A Node.js module is loaded ('crypto' at line 1) which is not supported in the Edge Runtime.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime

Import trace for requested module:
./src/lib/customAuth.ts


[info]    Skipping validation of types
   Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/34) ...

[info]    Generating static pages (8/34) 

[info]    Generating static pages (16/34) 

[info]    Generating static pages (25/34) 

[info]  ✓ Generating static pages (34/34)

[info]    Finalizing page optimization ...

[info]    Collecting build traces ...

[info] 

[info] Route (app)                                  Size     First Load JS
┌ ○ /                                        6.12 kB         111 kB
├ ○ /_not-found                              873 B          88.5 kB
├ ○ /admin                                   4.55 kB         114 kB
├ ○ /admin/analytics                         4.49 kB         114 kB
├ ○ /admin/collections                       7.24 kB         122 kB
├ ○ /admin/login                             2.28 kB         111 kB
├ ○ /admin/settings                          9.73 kB         114 kB
├ ○ /admin/users                             6.55 kB         116 kB
├ ƒ /api/admin/analytics                     0 B                0 B
├ ƒ /api/admin/auth/check                    0 B                0 B
├ ƒ /api/admin/auth/login                    0 B                0 B
├ ƒ /api/admin/auth/logout                   0 B                0 B
├ ƒ /api/admin/collect                       0 B                0 B
├ ƒ /api/admin/collection-tasks              0 B                0 B
├ ƒ /api/admin/settings                      0 B                0 B
├ ƒ /api/admin/stats                         0 B                0 B
├ ƒ /api/admin/users                         0 B                0 B
├ ƒ /api/auth/check                          0 B                0 B
├ ƒ /api/auth/firebase-sync                  0 B                0 B
├ ƒ /api/auth/login                          0 B                0 B
├ ƒ /api/auth/logout                         0 B                0 B
├ ƒ /api/auth/register                       0 B                0 B
├ ƒ /api/collect                             0 B                0 B
├ ƒ /api/collected-waste                     0 B                0 B
├ ƒ /api/leaderboard                         0 B                0 B
├ ƒ /api/reports                             0 B                0 B
├ ƒ /api/rewards                             0 B                0 B
├ ƒ /api/upload/image                        0 B                0 B
├ ƒ /api/user/balance                        0 B                0 B
├ ƒ /api/user/change-password                0 B                0 B
├ ƒ /api/user/delete-account                 0 B                0 B
├ ƒ /api/user/notifications                  0 B                0 B
├ ƒ /api/user/notifications/[id]             0 B                0 B
├ ƒ /api/user/profile                        0 B                0 B
├ ƒ /api/user/settings                       0 B                0 B
├ ƒ /api/user/stats                          0 B                0 B
├ ƒ /api/users                               0 B                0 B
├ ƒ /api/users/email/[email]                 0 B                0 B
├ ƒ /api/verify-waste                        0 B                0 B
├ ○ /api/waste-collection-tasks              0 B                0 B
├ ƒ /api/waste-collection-tasks/[id]/status  0 B                0 B
├ ○ /auth/signin                             3.91 kB         149 kB
├ ○ /auth/signup                             4.53 kB         150 kB
├ ○ /collect                                 1.8 kB          106 kB
├ ○ /leaderboard                             2.87 kB        95.2 kB
├ ○ /messages                                3.93 kB         110 kB
├ ○ /notifications                           4.91 kB         114 kB
├ ○ /profile                                 7.2 kB          108 kB
├ ○ /rewards                                 5.38 kB         106 kB
├ ○ /rewards/report                          11.6 kB         112 kB
├ ○ /search                                  5.68 kB         101 kB
├ ○ /settings                                9.12 kB         105 kB
└ ○ /verify                                  2.85 kB        98.5 kB
+ First Load JS shared by all                87.6 kB
  ├ chunks/117-aa5adc377df2fd20.js           31.5 kB
  ├ chunks/fd9d1056-bb01ff989b0918d5.js      53.6 kB
  └ other shared chunks (total)              2.47 kB


ƒ Middleware                                 90.9 kB

○  (Static)   prerendered as static content
ƒ  (Dynamic)  server-rendered on demand


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • non-static component /api/auth/firebase-sync/route
[info]  • non-static component /api/auth/logout/route
[info]  • non-static component /api/auth/login/route
[info]  • non-static component /api/auth/register/route
[debug] [2026-01-28T16:13:15.333Z]  • non-static component /api/upload/image/route
[debug] [2026-01-28T16:13:15.333Z]  • non-static component /api/user/change-password/route
[debug] [2026-01-28T16:13:15.333Z]  • non-static component /api/user/delete-account/route
[debug] [2026-01-28T16:13:15.333Z]  • non-static component /api/users/email/[email]/route
[debug] [2026-01-28T16:13:15.333Z]  • non-static component /api/user/settings/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/users/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/verify-waste/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/waste-collection-tasks/[id]/status/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/auth/check/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/analytics/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/auth/logout/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/collect/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/auth/login/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/auth/check/route
[debug] [2026-01-28T16:13:15.334Z]  • non-static component /api/admin/stats/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/admin/collection-tasks/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/collected-waste/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/collect/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/admin/settings/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/rewards/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/admin/users/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/leaderboard/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/user/balance/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/user/notifications/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/user/notifications/[id]/route
[debug] [2026-01-28T16:13:15.335Z]  • non-static component /api/reports/route
[debug] [2026-01-28T16:13:15.336Z]  • non-static component /api/user/profile/route
[debug] [2026-01-28T16:13:15.336Z]  • non-static component /api/user/stats/route
[info]  • and 28 other reasons, use --debug to see more
[info] 
[debug] [2026-01-28T16:13:19.382Z] skipping /api/waste-collection-tasks due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.384Z] skipping /admin/analytics due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.384Z] skipping /admin/login due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.384Z] skipping /admin due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.384Z] skipping /admin/settings due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.385Z] skipping /admin/users due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.387Z] skipping /admin/collections due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.387Z] skipping /notifications due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.388Z] skipping /profile due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.391Z] skipping /settings due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:19.391Z] skipping /verify due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2026-01-28T16:13:30.732Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:13:30.732Z] Checked if tokens are valid: true, expires at: 1769620121382
[debug] [2026-01-28T16:13:30.732Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 [none]
[debug] [2026-01-28T16:13:32.489Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 200
[debug] [2026-01-28T16:13:32.489Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/zero2hero-5c177/sites/zero2hero-5c177 {"name":"projects/zero2hero-5c177/sites/zero2hero-5c177","defaultUrl":"https://zero2hero-5c177.web.app","type":"DEFAULT_SITE"}
[debug] [2026-01-28T16:15:50.771Z] Error: Command failed: npm i --omit dev --no-audit
    at genericNodeError (node:internal/errors:985:15)
    at wrappedFn (node:internal/errors:539:14)
    at checkExecSyncError (node:child_process:925:11)
    at execSync (node:child_process:997:15)
    at prepareFrameworks (C:\Users\devan\AppData\Roaming\npm\node_modules\firebase-tools\lib\frameworks\index.js:373:42)
    at async deploy (C:\Users\devan\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\index.js:78:9)
[error] 
[error] Error: An unexpected error has occurred.
